# Techcross 미팅 - P&ID 고도화 작업

> **작성일**: 2025-12-06
> **최종 업데이트**: 2025-12-12
> **고객사**: Techcross (해양/조선 기자재)

---

## 미완료 작업

### 1. Human-in-the-Loop 검증 UI (중요도: 높음)

**필요 이유**: AI 정확도가 100%가 아니므로 사람이 결과를 검토/수정할 수 있어야 함. 고객 미팅에서 "승인/수정/반려 기능 필수"라고 언급됨.

```
구현 내용:
- 도면 위에 바운딩 박스 오버레이 표시
- 클릭으로 항목 선택, 드래그로 박스 수정
- 클래스 변경, 삭제 기능
- 승인/반려 버튼으로 최종 확정
- 수정 이력 DB 저장 (감사 추적)

구현 파일:
- web-ui/src/pages/verification/VerificationPage.tsx (신규)
- web-ui/src/components/verification/BoundingBoxEditor.tsx (신규)

예상 작업량: 5-7일
```

---

### 2. Knowledge Engine 확장 (중요도: 높음)

**필요 이유**: 현재 Knowledge Engine에 도메인 데이터가 없음. "이 밸브가 KR 규정에 맞는가?" 같은 검증 불가.

```
추가할 데이터:
1. KR 선급 규정 (배관, 밸브, 안전장치 규정)
2. ISO 배관 표준 (ISO 1101, 5208 등)
3. 조선소별 심볼 매핑 (현대: GV-001 = Gate Valve)

구현 방법:
- 규정 문서를 Neo4j 노드로 저장
- 심볼 ↔ 규정 관계 연결
- Knowledge API에 규정 검색 엔드포인트 추가

예상 작업량: 3-4일 (데이터 수집 별도)
```

---

### 3. 피드백 루프 - 재학습 (중요도: 중간)

**필요 이유**: 검증 UI에서 수정한 내용을 모델 개선에 활용해야 정확도가 점진적으로 향상됨.

```
구현 내용:
- 수정된 바운딩 박스/클래스를 corrections 테이블에 저장
- 일정량(예: 100건) 누적 시 재학습 트리거
- YOLO fine-tuning 스크립트 실행
- 새 모델을 Docker 이미지에 반영

구현 파일:
- gateway-api/services/feedback_service.py
- scripts/retrain_yolo.py

예상 작업량: 4-5일
```

---

### 4. 배관 사이징 계산기 (중요도: 중간)

**필요 이유**: 고객 미팅에서 "펌프 용량 3000m³/h면 배관이 몇 인치여야 하나?" 검증 요구.

```
구현 내용:
- 입력: 펌프 용량, 유체 종류, 온도, 배관 길이
- 출력: 권장 배관 직경, 예상 유속, 압력 손실
- 도면 설계값과 비교하여 불일치 시 경고
- Darcy-Weisbach, Hazen-Williams 공식 사용

구현 위치:
- gateway-api/services/pipe_calculator.py
- 또는 별도 API (models/pipe-calculator-api/)

예상 작업량: 3-4일
```

---

## 우선순위 요약

| 순위 | 작업 | 예상 기간 | 필수 여부 |
|------|------|----------|----------|
| 1 | Human-in-the-Loop UI | 5-7일 | **필수** (고객 요구) |
| 2 | Knowledge Engine 확장 | 3-4일 | 권장 |
| 3 | 피드백 루프 (재학습) | 4-5일 | 선택 |
| 4 | 배관 사이징 계산기 | 3-4일 | 선택 |

**총 예상 작업량**: 약 15-20일

---

**참고**: 이 작업들은 납품 준비 완료 후 고객 요구에 따라 진행
