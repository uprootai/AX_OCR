================================================================================
                [1-2. Valve Signal List 작성] 질문 상세 설명
================================================================================

이 문서는 TECHCROSS 이메일 질문 중 [1-2] 섹션의 각 질문에 대해
"왜 이 질문을 하는지"를 설명합니다.

================================================================================

배경 설명: Valve Signal List란?
--------------------------------------------------------------------------------

  P&ID 도면에서 밸브 정보를 추출하여 제어 시스템용 리스트를 생성하는 것

  ┌──────────────────────────────────────────────────────────────────┐
  │  P&ID 도면                                                       │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │     ┌───┐                                                        │
  │  ───┤ V ├───  ← 밸브 (SIGNAL FOR BWMS 라벨)                     │
  │     └───┘                                                        │
  │       │                                                          │
  │       ▼                                                          │
  │  TEI01V  ECU INLET V/V                                           │
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘
                    ↓
                 추출 후
                    ↓
  ┌──────────────────────────────────────────────────────────────────┐
  │  Valve Signal List (Excel)                                       │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │  밸브 ID   │ 설명           │ 순번 │ SIGNAL 조건               │
  │  ─────────┼────────────────┼──────┼──────────────────────────  │
  │  TEI01V   │ ECU INLET V/V  │  0   │ V/V:FULL OPEN=SIGNAL:ON   │
  │  TEI02V   │ ECU BYPASS V/V │  0   │ V/V:LITTLE OPEN=SIGNAL:ON │
  │  BAV01    │ NO.1 BYPASS V/V│  1   │ V/V:LITTLE OPEN=SIGNAL:ON │
  │  ...      │ ...            │ ...  │ ...                        │
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘


================================================================================

1. Signal List 대상 밸브 식별 및 분류 기준
--------------------------------------------------------------------------------

[질문 내용]
Signal List 대상 밸브의 식별 및 분류 기준이 궁금합니다.
- "SIGNAL FOR BWMS" 라벨이 붙은 밸브만 대상인지, 다른 기준이 있는지
- 밸브 카테고리(Required valve, Alarm By-pass 등) 판별 기준이 도면상 어떻게 표시되는지

[왜 필요한가?]

  P&ID 도면에는 수십 개의 밸브가 있음. 어떤 밸브가 추출 대상?

  ┌──────────────────────────────────────────────────────────────────┐
  │  P&ID 도면 내 밸브들                                             │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │    ┌───┐         ┌───┐         ┌───┐         ┌───┐             │
  │  ──┤ V ├──     ──┤ V ├──     ──┤ V ├──     ──┤ V ├──           │
  │    └───┘         └───┘         └───┘         └───┘             │
  │      │             │             │             │                │
  │  "SIGNAL       일반 밸브      일반 밸브     "SIGNAL             │
  │   FOR BWMS"                                FOR BWMS"            │
  │      │                                        │                │
  │      ↓                                        ↓                │
  │   추출 대상?                               추출 대상?           │
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘

[밸브 식별 기준 가능성]

  ┌──────────────────────────────────────────────────────────────────┐
  │  기준 1: "SIGNAL FOR BWMS" 텍스트 유무                           │
  ├──────────────────────────────────────────────────────────────────┤
  │  → OCR로 텍스트 검색                                             │
  │  → 해당 텍스트 근처 밸브만 추출                                  │
  └──────────────────────────────────────────────────────────────────┘

  ┌──────────────────────────────────────────────────────────────────┐
  │  기준 2: 특정 밸브 ID 패턴                                       │
  ├──────────────────────────────────────────────────────────────────┤
  │  → TEI*, BAV*, SAV* 등 특정 접두사                              │
  │  → 패턴 매칭으로 추출                                            │
  └──────────────────────────────────────────────────────────────────┘

  ┌──────────────────────────────────────────────────────────────────┐
  │  기준 3: 특정 영역 내 모든 밸브                                   │
  ├──────────────────────────────────────────────────────────────────┤
  │  → BWMS 시스템 영역 내 밸브 전체                                 │
  │  → 영역 경계 정의 필요                                           │
  └──────────────────────────────────────────────────────────────────┘

[밸브 카테고리 분류]

  Valve Signal List는 카테고리별로 분류됨

  ┌──────────────────────────────────────────────────────────────────┐
  │  Valve Signal List 구조                                          │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐│
  │  │ Required valve (주요 밸브)                                  ││
  │  │ ─────────────────────────────────────────                   ││
  │  │ TEI01V   ECU INLET V/V        순번 0                        ││
  │  │ TEI02V   ECU BYPASS V/V       순번 0                        ││
  │  └─────────────────────────────────────────────────────────────┘│
  │                                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐│
  │  │ Alarm By-pass valve (알람 바이패스)                         ││
  │  │ ─────────────────────────────────────────                   ││
  │  │ BAV02    BYPASS V/V           순번 1                        ││
  │  │ BAV03    NO.2 BYPASS V/V      순번 2                        ││
  │  └─────────────────────────────────────────────────────────────┘│
  │                                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐│
  │  │ PUMP SIGNAL                                                 ││
  │  │ ─────────────────────────────────────────                   ││
  │  │ BALLAST P/P  NO.1 BALLAST P/P  순번 1                       ││
  │  └─────────────────────────────────────────────────────────────┘│
  │                                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐│
  │  │ ABNORMAL or INTERLOCK SIGNAL                                ││
  │  │ ─────────────────────────────────────────                   ││
  │  │ BWMS ABNORMAL                                               ││
  │  │ FAN RUNNING SIGNAL                                          ││
  │  └─────────────────────────────────────────────────────────────┘│
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘

[카테고리 판별 방법 가능성]

  ┌────────────────────────────────────────────────────────────────┐
  │  방법 1: 밸브 ID 접두사로 구분                                  │
  │  TEI*, SAV* → Required valve                                  │
  │  BAV*       → Alarm By-pass valve                             │
  │  BALLAST*   → PUMP SIGNAL                                     │
  └────────────────────────────────────────────────────────────────┘

  ┌────────────────────────────────────────────────────────────────┐
  │  방법 2: 도면 내 위치/영역으로 구분                             │
  │  특정 영역 내 밸브 = 특정 카테고리                              │
  └────────────────────────────────────────────────────────────────┘

  ┌────────────────────────────────────────────────────────────────┐
  │  방법 3: 별도 라벨/마킹으로 구분                                │
  │  도면에 카테고리 정보가 직접 표시                               │
  └────────────────────────────────────────────────────────────────┘

[핵심]
  → 밸브 추출 로직 및 분류 로직 설계


================================================================================

2. SIGNAL 조건 추출 방법
--------------------------------------------------------------------------------

[질문 내용]
SIGNAL 조건 텍스트(예: "V/V:LITTLE OPEN=SIGNAL:ON")는 도면에서 직접 추출해야 하는지,
아니면 별도 규칙 테이블이 존재하는지요?

[왜 필요한가?]

  각 밸브마다 SIGNAL 조건이 다름

  ┌──────────────────────────────────────────────────────────────────┐
  │  SIGNAL 조건 예시                                                │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │  밸브 ID   │ SIGNAL 조건                                        │
  │  ─────────┼────────────────────────────────────────────────     │
  │  TEI01V   │ V/V:FULL OPEN=SIGNAL:ON                             │
  │  TEI02V   │ V/V:LITTLE OPEN=SIGNAL:ON                           │
  │  BAV02    │ V/V:LITTLE OPEN=SIGNAL:ON                           │
  │  PUMP     │ PUMP:RUN=SIGNAL:ON                                  │
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘

[두 가지 가능성]

  가능성 1: 도면에서 직접 추출
  ┌────────────────────────────────────────────────────────────────┐
  │                                                                │
  │  P&ID 도면에 SIGNAL 조건이 텍스트로 표시됨                     │
  │                                                                │
  │     ┌───┐                                                      │
  │  ───┤ V ├───  TEI01V                                          │
  │     └───┘     "V/V:FULL OPEN=SIGNAL:ON"  ← 이 텍스트 OCR      │
  │                                                                │
  │  → OCR로 추출                                                  │
  │                                                                │
  └────────────────────────────────────────────────────────────────┘

  가능성 2: 별도 규칙 테이블 존재
  ┌────────────────────────────────────────────────────────────────┐
  │                                                                │
  │  밸브 종류별 기본 SIGNAL 조건 테이블                           │
  │                                                                │
  │  밸브 종류        │ 기본 SIGNAL 조건                          │
  │  ────────────────┼──────────────────────────────────────      │
  │  INLET V/V       │ V/V:FULL OPEN=SIGNAL:ON                    │
  │  BYPASS V/V      │ V/V:LITTLE OPEN=SIGNAL:ON                  │
  │  PUMP            │ PUMP:RUN=SIGNAL:ON                         │
  │                                                                │
  │  → 테이블 룩업으로 자동 적용                                   │
  │                                                                │
  └────────────────────────────────────────────────────────────────┘

[개발 방향 결정]

  도면에서 추출 → OCR 정확도 중요, 복잡한 파싱 필요
  테이블 사용   → 간단, 예외 처리 필요

[핵심]
  → 데이터 추출 방식 결정


================================================================================

3. 운전 모드별 Signal List 차이
--------------------------------------------------------------------------------

[질문 내용]
운전 모드(BALLASTING, DE-BALLASTING, MIXING, STRIPPING)별로 Signal List가 달라지는지,
통합 관리되는지 궁금합니다.

[왜 필요한가?]

  BWMS는 여러 운전 모드가 있음

  ┌──────────────────────────────────────────────────────────────────┐
  │  BWMS 운전 모드                                                  │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                  │
  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
  │  │ BALLASTING  │  │DE-BALLASTING│  │   MIXING    │              │
  │  │ (주입)      │  │ (배출)      │  │ (혼합)      │              │
  │  └─────────────┘  └─────────────┘  └─────────────┘              │
  │                                                                  │
  │  ┌─────────────┐  ┌─────────────┐                               │
  │  │ STRIPPING   │  │  GRAVITY    │                               │
  │  │ (스트리핑)  │  │ (중력 배출) │                               │
  │  └─────────────┘  └─────────────┘                               │
  │                                                                  │
  └──────────────────────────────────────────────────────────────────┘

[모드별 차이 가능성]

  가능성 1: 통합 관리
  ┌────────────────────────────────────────────────────────────────┐
  │                                                                │
  │  하나의 Signal List에 모든 모드 정보 포함                      │
  │                                                                │
  │  밸브 ID │ BALLASTING │ DE-BALLASTING │ MIXING │ STRIPPING   │
  │  ───────┼────────────┼───────────────┼────────┼─────────     │
  │  TEI01V │    ON      │      OFF      │  OFF   │    OFF       │
  │  BAV02  │    OFF     │      ON       │  ON    │    OFF       │
  │                                                                │
  └────────────────────────────────────────────────────────────────┘

  가능성 2: 모드별 별도 관리
  ┌────────────────────────────────────────────────────────────────┐
  │                                                                │
  │  Signal List (BALLASTING)                                      │
  │  Signal List (DE-BALLASTING)                                   │
  │  Signal List (MIXING)                                          │
  │  Signal List (STRIPPING)                                       │
  │                                                                │
  │  → 각각 별도 파일/시트                                         │
  │                                                                │
  └────────────────────────────────────────────────────────────────┘

[개발 영향]

  통합 관리 → 하나의 출력 파일
  별도 관리 → 모드별 출력 또는 탭 분리

[핵심]
  → 출력 형식 및 데이터 구조 설계


================================================================================

[1-2] 질문 요약
================================================================================

  번호 │ 질문                    │ 목적
  ─────┼─────────────────────────┼──────────────────────────
    1  │ 밸브 식별/분류 기준     │ 추출 및 분류 로직 설계
    2  │ SIGNAL 조건 출처        │ 데이터 추출 방식 결정
    3  │ 운전 모드별 차이        │ 출력 형식 설계

================================================================================
