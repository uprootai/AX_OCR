# AX Microservice API System - Environment Configuration
# Copy this file to .env and customize the values

# ============================================================================
# Security Configuration
# ============================================================================

# API Authentication (Optional)
# Set to 'true' to enable API key authentication
ENABLE_AUTH=false

# API Key for authentication
# Generate a strong random key: openssl rand -hex 32
API_KEY=your-secret-api-key-here

# Path to security config YAML (optional, overrides API_KEY if provided)
# SECURITY_CONFIG=/path/to/security_config.yaml

# ============================================================================
# Rate Limiting Configuration
# ============================================================================

# Enable rate limiting (Optional)
# Set to 'true' to prevent abuse and DoS attacks
ENABLE_RATE_LIMIT=false

# Rate limits per IP address
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_PER_HOUR=500
RATE_LIMIT_PER_DAY=3000

# ============================================================================
# Grafana Configuration
# ============================================================================

# Grafana admin credentials
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ============================================================================
# Service URLs (Internal - Docker network)
# ============================================================================

# These are used for inter-service communication within Docker
EDOCR2_V1_URL=http://edocr2-api-v1:5001
EDOCR2_V2_URL=http://edocr2-api-v2:5002
EDGNET_URL=http://edgnet-api:5012
SKINMODEL_URL=http://skinmodel-api:5003

# ============================================================================
# Circuit Breaker Configuration (Advanced)
# ============================================================================

# Number of consecutive failures before opening circuit
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Time in seconds before attempting to close circuit
CIRCUIT_BREAKER_TIMEOUT=60

# ============================================================================
# Retry Configuration (Advanced)
# ============================================================================

# Maximum retry attempts for failed requests
RETRY_MAX_ATTEMPTS=3

# Initial delay in seconds before first retry
RETRY_INITIAL_DELAY=1.0

# Maximum delay in seconds between retries
RETRY_MAX_DELAY=10.0

# Exponential backoff base
RETRY_EXPONENTIAL_BASE=2.0

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: debug, info, warning, error, critical
GATEWAY_LOG_LEVEL=info
EDOCR2_LOG_LEVEL=info
EDGNET_LOG_LEVEL=info
SKINMODEL_LOG_LEVEL=info

# ============================================================================
# Performance Configuration
# ============================================================================

# Number of worker processes per service
GATEWAY_WORKERS=4
EDOCR2_WORKERS=2
EDGNET_WORKERS=2
SKINMODEL_WORKERS=2

# Request timeout in seconds
REQUEST_TIMEOUT=120

# ============================================================================
# CORS Configuration
# ============================================================================

# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================================================
# Usage Examples
# ============================================================================

# Development (no security):
# ENABLE_AUTH=false
# ENABLE_RATE_LIMIT=false

# Production (with security):
# ENABLE_AUTH=true
# API_KEY=<strong-random-key>
# ENABLE_RATE_LIMIT=true
# RATE_LIMIT_PER_MINUTE=30
# RATE_LIMIT_PER_HOUR=500
# GRAFANA_PASSWORD=<strong-password>

# Testing (permissive rate limits):
# ENABLE_RATE_LIMIT=true
# RATE_LIMIT_PER_MINUTE=100
# RATE_LIMIT_PER_HOUR=5000
