# /handoff - 세션 핸드오프 명령

컨텍스트 윈도우가 60% 이상 찼을 때 안전하게 세션을 전환하기 위한 명령입니다.

---

## 실행 조건

다음 상황에서 이 명령을 실행하세요:
- `/context` 명령으로 확인 시 **60% 이상** 사용
- 긴 대화 후 새로운 복잡한 작업 시작 전
- 컨텍스트 부패(Context Rot) 징후가 보일 때 (응답 품질 저하)

---

## 핸드오프 문서 생성

아래 형식으로 핸드오프 문서를 생성하세요:

### 1. 파일 생성 위치
```
.claude/handoff/handoff_YYYY-MM-DD_HHMMSS.md
```

### 2. 문서 구조

```markdown
# 세션 핸드오프 - [날짜 시간]

## 1. 세션 요약
[이번 세션에서 수행한 작업 개요 - 2-3문장]

## 2. 작업 중인 태스크
- [ ] [태스크 1]
- [ ] [태스크 2]
- [x] [완료된 태스크]

## 3. 수정된 파일
| 파일 | 변경 유형 | 설명 |
|------|----------|------|
| path/to/file1.ts | Modified | [변경 내용] |
| path/to/file2.py | Created | [생성 이유] |

## 4. 미완료 작업
- [작업 1]: [현재 상태, 다음 단계]
- [작업 2]: [블로커가 있다면 기술]

## 5. 중요 결정사항
- [결정 1]: [선택한 이유]
- [결정 2]: [대안과 비교]

## 6. 다음 세션에서 할 일
1. [우선순위 1]
2. [우선순위 2]
3. [우선순위 3]

## 7. 참고 컨텍스트
- 관련 파일: [파일 경로들]
- 관련 문서: [문서 링크들]
- 이슈/PR: [있다면 링크]

---
**생성 시간**: [타임스탬프]
**컨텍스트 사용률**: [X%]
```

---

## 실행 단계

### Step 1: 현재 상태 수집
```bash
# Git 상태 확인
git status --short

# 최근 변경 파일
git diff --name-only HEAD~5

# 현재 브랜치
git branch --show-current
```

### Step 2: 핸드오프 문서 작성
위 템플릿을 사용하여 `.claude/handoff/` 디렉토리에 저장

### Step 3: 사용자에게 안내
```
✅ 핸드오프 문서가 생성되었습니다.

📄 파일: .claude/handoff/handoff_YYYY-MM-DD_HHMMSS.md

🔄 새 세션 시작 방법:
1. 새 Claude Code 세션을 시작하세요
2. 다음 메시지로 시작: "위 핸드오프 파일을 읽고 작업을 계속해주세요"
3. 또는 파일을 직접 첨부하세요

💡 팁: 새 세션은 신선한 컨텍스트로 시작하여 더 정확한 응답을 제공합니다.
```

---

## 자동 수집 정보

핸드오프 시 자동으로 수집할 정보:

1. **Git 상태**
   - 현재 브랜치
   - 스테이징된 파일
   - 수정된 파일
   - 최근 커밋 (5개)

2. **Todo 리스트**
   - 현재 진행 중인 작업
   - 완료된 작업
   - 대기 중인 작업

3. **열린 파일/컨텍스트**
   - 최근 읽은 파일들
   - 수정한 파일들

---

## 핸드오프 vs 컴팩트

| 상황 | 권장 명령 |
|------|----------|
| 작업 중간, 컨텍스트만 정리 | `/compact` |
| 작업 완료, 새 작업 시작 | `/handoff` |
| 복잡한 작업 전환 | `/handoff` |
| 단순 질문 응답 후 | `/compact` |

---

## 예시: 핸드오프 문서

```markdown
# 세션 핸드오프 - 2026-01-16 14:30:00

## 1. 세션 요약
CLAUDE.md를 794줄에서 236줄로 최적화하고, 4개의 온디맨드 스킬 파일을 생성했습니다.
블로그 인사이트 기반 컨텍스트 엔지니어링 적용 중입니다.

## 2. 작업 중인 태스크
- [x] CLAUDE.md 최적화 (794줄 → 236줄)
- [x] 온디맨드 스킬 4개 생성
- [ ] /handoff 명령 생성
- [ ] Hooks 설정
- [ ] 컨텍스트 엔지니어링 가이드

## 3. 수정된 파일
| 파일 | 변경 유형 | 설명 |
|------|----------|------|
| CLAUDE.md | Modified | 794줄 → 236줄 최적화 |
| .claude/skills/modularization-guide.md | Created | 모듈화 가이드 분리 |
| .claude/skills/api-creation-guide.md | Created | API 생성 가이드 분리 |
| .claude/skills/project-reference.md | Created | 프로젝트 레퍼런스 분리 |
| .claude/skills/version-history.md | Created | 버전 히스토리 분리 |

## 4. 미완료 작업
- Hooks 설정: .claude/settings.json 생성 필요
- 컨텍스트 가이드: 문서 작성 필요

## 5. 중요 결정사항
- CLAUDE.md 500줄 제한 적용 (블로그 권장)
- 상세 가이드는 온디맨드 스킬로 분리

## 6. 다음 세션에서 할 일
1. /handoff 명령 완성
2. Hooks 설정 (.claude/settings.json)
3. Commands README 업데이트

---
**생성 시간**: 2026-01-16T14:30:00
**컨텍스트 사용률**: 65%
```

---

**마지막 업데이트**: 2026-01-16
