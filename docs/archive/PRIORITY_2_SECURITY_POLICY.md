# ðŸŸ¡ ìš°ì„ ìˆœìœ„ 2-2: ë³´ì•ˆ ì •ì±… ê²°ì •

**ëª©ì **: API ì¸ì¦, Rate limiting, ë³´ì•ˆ ì •ì±… ê²°ì •
**ì†Œìš” ì‹œê°„**: 1-2ì¼
**ë‹´ë‹¹ìž**: ì‹œìŠ¤í…œ ê´€ë¦¬ìž + ë³´ì•ˆ ë‹´ë‹¹ìž

---

## ðŸ“‹ í˜„ìž¬ ìƒíƒœ

### ë³´ì•ˆ í˜„í™©
- âŒ **ì¸ì¦ ì—†ìŒ**: ëˆ„êµ¬ë‚˜ API í˜¸ì¶œ ê°€ëŠ¥
- âŒ **Rate limiting ì—†ìŒ**: ë¬´ì œí•œ ìš”ì²­ ê°€ëŠ¥
- âš ï¸ **CORS**: localhost:5173ë§Œ í—ˆìš© (ê°œë°œ í™˜ê²½)
- âš ï¸ **HTTPS**: ë¯¸ì„¤ì • (HTTPë§Œ)

### ë³´ì•ˆ ìœ„í—˜
1. **ë¬´ë‹¨ ì ‘ê·¼**: ì™¸ë¶€ì—ì„œ API ì‚¬ìš© ê°€ëŠ¥
2. **DoS ê³µê²©**: ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì„œë¹„ìŠ¤ ë§ˆë¹„
3. **ë°ì´í„° ìœ ì¶œ**: ë¯¼ê° ë„ë©´ ì •ë³´ ë…¸ì¶œ

---

## âœ… ê²°ì •í•´ì•¼ í•  ì‚¬í•­

### 1. ì¸ì¦ ë°©ì‹ ì„ íƒ

#### ì˜µì…˜ A: API í‚¤ (ê°„ë‹¨, ê¶Œìž¥)
```bash
# ìž¥ì : êµ¬í˜„ ê°„ë‹¨, ê´€ë¦¬ ìš©ì´
# ë‹¨ì : í‚¤ ë…¸ì¶œ ì‹œ ìœ„í—˜

# ì˜ˆì‹œ
curl -H "X-API-Key: abc123xyz" http://localhost:8000/api/v1/process
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ë‚´ë¶€ ì‹œìŠ¤í…œ, ì‹ ë¢° ê°€ëŠ¥í•œ í´ë¼ì´ì–¸íŠ¸

#### ì˜µì…˜ B: JWT (ë³µìž¡, ë³´ì•ˆ ë†’ìŒ)
```bash
# ìž¥ì : ë³´ì•ˆ ê°•í™”, ë§Œë£Œ ì‹œê°„ ì„¤ì •
# ë‹¨ì : êµ¬í˜„ ë³µìž¡

# ì˜ˆì‹œ
curl -H "Authorization: Bearer eyJ0eXAiOiJ..." http://localhost:8000/api/v1/process
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ì™¸ë¶€ ë…¸ì¶œ, ë‹¤ìˆ˜ ì‚¬ìš©ìž

#### ì˜µì…˜ C: OAuth 2.0 (ë§¤ìš° ë³µìž¡)
```bash
# ìž¥ì : ìµœê³  ìˆ˜ì¤€ ë³´ì•ˆ
# ë‹¨ì : êµ¬í˜„/ìš´ì˜ ë³µìž¡

# ì˜ˆì‹œ
# 1. ì¸ì¦ ì„œë²„ì—ì„œ í† í° ë°›ê¸°
# 2. í† í°ìœ¼ë¡œ API í˜¸ì¶œ
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ëŒ€ê·œëª¨ ì—”í„°í”„ë¼ì´ì¦ˆ

#### ì˜µì…˜ D: ì¸ì¦ ì—†ìŒ (í˜„ìž¬)
**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ê°œë°œ í™˜ê²½, íì‡„ë§

### ê²°ì • ì‚¬í•­

**ì„ íƒí•œ ì¸ì¦ ë°©ì‹**: [ ] API í‚¤ / [ ] JWT / [ ] OAuth / [ ] ì—†ìŒ

**ì´ìœ **:
```
(ì—¬ê¸°ì— ì„ íƒ ì´ìœ  ìž‘ì„±)
ì˜ˆ: ë‚´ë¶€ ì‹œìŠ¤í…œì´ë¯€ë¡œ API í‚¤ë¡œ ì¶©ë¶„
```

---

### 2. Rate Limiting ì„¤ì •

#### ì§ˆë¬¸ 1: ìš”ì²­ ì œí•œ í•„ìš”í•œê°€?
- [ ] ì˜ˆ â†’ ì•„ëž˜ ì„¤ì •
- [ ] ì•„ë‹ˆì˜¤ â†’ ë¬´ì œí•œ

#### ì§ˆë¬¸ 2: ì œí•œ ìˆ˜ì¤€ (ì˜ˆì¸ ê²½ìš°)

**ì˜µì…˜ A: ë‚®ì€ ì œí•œ (ë³´ìˆ˜ì )**
```
- ë¶„ë‹¹ 10 ìš”ì²­
- ì‹œê°„ë‹¹ 100 ìš”ì²­
- ì¼ë‹¹ 500 ìš”ì²­
```
**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: í…ŒìŠ¤íŠ¸ í™˜ê²½, ì†Œê·œëª¨

**ì˜µì…˜ B: ì¤‘ê°„ ì œí•œ (ê¶Œìž¥)**
```
- ë¶„ë‹¹ 30 ìš”ì²­
- ì‹œê°„ë‹¹ 500 ìš”ì²­
- ì¼ë‹¹ 3,000 ìš”ì²­
```
**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ì¼ë°˜ í”„ë¡œë•ì…˜

**ì˜µì…˜ C: ë†’ì€ ì œí•œ**
```
- ë¶„ë‹¹ 100 ìš”ì²­
- ì‹œê°„ë‹¹ 2,000 ìš”ì²­
- ì¼ë‹¹ 20,000 ìš”ì²­
```
**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ëŒ€ê·œëª¨ ìš´ì˜

### ê²°ì • ì‚¬í•­

**Rate Limit ì„¤ì •**:
```
ë¶„ë‹¹: ___ ìš”ì²­
ì‹œê°„ë‹¹: ___ ìš”ì²­
ì¼ë‹¹: ___ ìš”ì²­
```

---

### 3. CORS ì •ì±…

#### í˜„ìž¬ ì„¤ì •
```python
allow_origins=["http://localhost:5173"]  # ê°œë°œ í™˜ê²½
```

#### í”„ë¡œë•ì…˜ ì„¤ì •

**ì˜µì…˜ A: íŠ¹ì • ë„ë©”ì¸ë§Œ**
```python
allow_origins=[
    "https://ax-drawings.company.com",
    "https://app.company.com"
]
```

**ì˜µì…˜ B: ëª¨ë“  ë„ë©”ì¸ (ë¹„ê¶Œìž¥)**
```python
allow_origins=["*"]  # ë³´ì•ˆ ìœ„í—˜!
```

### ê²°ì • ì‚¬í•­

**í—ˆìš©í•  Origin**:
```
1. https://_______________
2. https://_______________
(ì¶”ê°€ ë„ë©”ì¸...)
```

---

### 4. HTTPS ì„¤ì •

#### ì§ˆë¬¸: HTTPS í•„ìš”í•œê°€?
- [ ] ì˜ˆ â†’ SSL ì¸ì¦ì„œ í•„ìš”
- [ ] ì•„ë‹ˆì˜¤ â†’ HTTP ìœ ì§€ (ê°œë°œ í™˜ê²½ë§Œ)

#### ì˜ˆì¸ ê²½ìš°:

**SSL ì¸ì¦ì„œ ë°œê¸‰ ë°©ë²•**
- [ ] Let's Encrypt (ë¬´ë£Œ)
- [ ] íšŒì‚¬ ì¸ì¦ì„œ
- [ ] ìƒìš© ì¸ì¦ì„œ

---

### 5. íŒŒì¼ ì—…ë¡œë“œ ì œí•œ

#### í˜„ìž¬ ìƒíƒœ
- íŒŒì¼ í¬ê¸° ì œí•œ: ì—†ìŒ (ìœ„í—˜!)
- íŒŒì¼ íƒ€ìž… ì œí•œ: PDF/JPG/PNGë§Œ

#### ê¶Œìž¥ ì„¤ì •

**íŒŒì¼ í¬ê¸° ì œí•œ**:
```
ìµœì†Œ: 10KB
ìµœëŒ€: _____ MB  (ê¶Œìž¥: 50MB)
```

**íŒŒì¼ íƒ€ìž…**:
- [ ] PDF
- [ ] JPG/JPEG
- [ ] PNG
- [ ] DWG (AutoCAD)
- [ ] ê¸°íƒ€: _________

---

## ðŸ”§ ì„¤ì • íŒŒì¼ ìž‘ì„±

ëª¨ë“  ê²°ì • ì™„ë£Œ í›„ ì•„ëž˜ íŒŒì¼ ìž‘ì„±:

```bash
# /home/uproot/ax/poc/security_config.yaml ìƒì„±
cat > security_config.yaml << 'SECEOF'
# ë³´ì•ˆ ì„¤ì •

authentication:
  enabled: true/false
  method: api_key/jwt/oauth/none
  api_keys:  # method=api_keyì¸ ê²½ìš°
    - key: "your-api-key-here"
      name: "Web UI"
      permissions: ["read", "write"]

rate_limiting:
  enabled: true/false
  per_minute: 30
  per_hour: 500
  per_day: 3000

cors:
  allow_origins:
    - "http://localhost:5173"
    - "https://your-domain.com"
  allow_credentials: true

https:
  enabled: true/false
  cert_path: "/path/to/cert.pem"
  key_path: "/path/to/key.pem"

file_upload:
  max_size_mb: 50
  allowed_types:
    - "application/pdf"
    - "image/jpeg"
    - "image/png"
SECEOF
```

---

## âœ… ì™„ë£Œ í™•ì¸

```bash
# 1. ì„¤ì • íŒŒì¼ í™•ì¸
cat security_config.yaml

# 2. ì‹œìŠ¤í…œ ì ìš© (Claudeê°€ ìžë™ ì ìš©)
python TODO/scripts/apply_security_config.py

# 3. í…ŒìŠ¤íŠ¸
# ì¸ì¦ ì—†ì´ ìš”ì²­ â†’ 401 Unauthorized
curl http://localhost:8000/api/v1/health

# ì¸ì¦ í¬í•¨ ìš”ì²­ â†’ 200 OK
curl -H "X-API-Key: your-key" http://localhost:8000/api/v1/health
```

---

**ìž‘ì„±ì¼**: 2025-11-08
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì¼
**ë‹¤ìŒ ë‹¨ê³„**: ìš°ì„ ìˆœìœ„ 3 ì§„í–‰
