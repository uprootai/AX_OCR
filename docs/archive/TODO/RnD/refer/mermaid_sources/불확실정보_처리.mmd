%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#e8f4f8','primaryTextColor':'#000','primaryBorderColor':'#4a90e2','lineColor':'#4a90e2','fontSize':'14px'}}}%%
graph LR
    A["<b>OCR 처리</b><br/><br/>부분 인식<br/>일부 누락"]
    B["<b>신뢰도 확인</b><br/><br/>Confidence<br/>Score 검사"]
    C["<b>LLM 추론</b><br/><br/>GPT-4 기반<br/>맥락 추정"]
    D["<b>사용자 확인</b><br/><br/>불확실 항목<br/>수동 검증"]
    E["<b>견적 수정</b><br/><br/>확정된 데이터<br/>재산정"]
    F["<b>최종 견적</b><br/><br/>검증 완료<br/>견적서 생성"]

    A --> B
    B -->|"낮은 신뢰도"| C
    C --> D
    D --> E
    E --> F
    B -->|"높은 신뢰도"| F

    style A fill:#e8f4f8,stroke:#4a90e2,stroke-width:2px
    style B fill:#fff3cd,stroke:#ffc107,stroke-width:2px
    style C fill:#ffeaa7,stroke:#fdcb6e,stroke-width:2px
    style D fill:#ffcccc,stroke:#cc0000,stroke-width:3px
    style E fill:#d4edda,stroke:#28a745,stroke-width:2px
    style F fill:#90EE90,stroke:#228B22,stroke-width:3px
