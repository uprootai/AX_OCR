# 📚 전체 API 파라미터 상세 가이드

**작성일**: 2025-11-23
**최종 수정**: 2026-01-17
**버전**: 1.0
**목적**: 모든 AI API의 파라미터 완전 설명

---

## 📑 목차

1. [YOLO API](#1️⃣-yolo-api)
2. [PaddleOCR API](#2️⃣-paddleocr-api)
3. [eDOCr2-v2 API](#3️⃣-edocr2-v2-api)
4. [EDGNet API](#4️⃣-edgnet-api)
5. [SkinModel API](#5️⃣-skinmodel-api)
6. [VL API](#6️⃣-vl-api-vision-language)

---

## 1️⃣ YOLO API

**엔드포인트**: `POST /api/v1/detect`  
**용도**: 도면에서 심볼, 치수, GD&T 기호 검출  
**포트**: 5005

### 파라미터 (6개)

#### 1. `model_type` (string, select)
- **기본값**: `"yolo11n-general"`
- **옵션**: 
  - `symbol-detector-v1`: 용접 심볼, 표면 거칠기 등 기호 전용
  - `dimension-detector-v1`: 치수 숫자 및 화살표 전용
  - `gdt-detector-v1`: 기하공차 기호 전용
  - `text-region-detector-v1`: 텍스트 영역 검출 전용
  - `yolo11n-general`: 범용 모델 (모든 클래스)
- **설명**: 검출 목적에 따라 특화된 모델 선택. 특화 모델이 일반 모델보다 해당 객체를 더 정확하게 검출함
- **사용 예시**: 
  - 용접 기호만 찾기: `symbol-detector-v1`
  - 모든 요소 검출: `yolo11n-general`

#### 2. `confidence` (float, 0.0-1.0)
- **기본값**: `0.5`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.05
- **설명**: 검출 신뢰도 임계값. 이 값보다 낮은 신뢰도의 객체는 제외됨
- **권장값**:
  - 정밀 검출 (false positive 최소화): `0.7 ~ 0.9`
  - 균형 (기본): `0.5 ~ 0.6`
  - 최대 검출 (false positive 허용): `0.3 ~ 0.4`
- **효과**: 
  - 높일수록: 확실한 객체만 검출 (누락 증가, 오검출 감소)
  - 낮출수록: 더 많이 검출 (누락 감소, 오검출 증가)

#### 3. `iou_threshold` (float, 0.0-1.0)
- **기본값**: `0.45`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.05
- **설명**: NMS (Non-Maximum Suppression) IoU 임계값. 겹치는 박스 제거 기준
- **IoU 계산**: `교집합 넓이 / 합집합 넓이`
- **권장값**:
  - 엄격한 중복 제거: `0.3 ~ 0.4`
  - 균형 (기본): `0.45 ~ 0.5`
  - 완화된 중복 허용: `0.6 ~ 0.7`
- **효과**:
  - 높일수록: 겹치는 박스를 더 허용 (같은 객체를 여러 번 검출 가능)
  - 낮출수록: 겹치는 박스를 엄격히 제거 (하나만 남김)

#### 4. `imgsz` (int, select)
- **기본값**: `640`
- **옵션**: `320`, `640`, `1280`
- **설명**: 입력 이미지 크기 (정방형으로 리사이즈됨)
- **권장값**:
  - 빠른 처리 (저해상도): `320` (속도 4배, 정확도 하락)
  - 균형 (기본): `640` (속도/정확도 균형)
  - 정밀 검출 (고해상도): `1280` (속도 1/4, 정확도 향상)
- **처리 시간** (CPU 기준):
  - 320: ~0.5초
  - 640: ~2.0초  
  - 1280: ~8.0초
- **사용 예시**:
  - 실시간 프리뷰: `320`
  - 최종 분석: `1280`

#### 5. `visualize` (boolean)
- **기본값**: `true`
- **설명**: 검출 결과를 시각화한 이미지 생성 여부
- **출력**: `visualized_image` (base64 인코딩된 PNG)
- **시각화 내용**:
  - 검출된 객체에 색상별 박스 표시
  - 클래스 이름 및 신뢰도 표시
  - 객체 개수 요약
- **권장값**:
  - 개발/디버깅: `true` (결과 확인용)
  - 운영 환경 (대량 처리): `false` (속도 향상)

#### 6. `task` (string, select)
- **기본값**: `"detect"`
- **옵션**: `detect`, `segment`
- **설명**: 검출 작업 유형
  - `detect`: 객체 위치만 박스로 표시 (빠름)
  - `segment`: 객체 형태를 픽셀 단위로 분할 (느림, 정확함)
- **참고**: Segment 모드는 `-seg` 모델 필요 (현재 미지원)

---

## 2️⃣ PaddleOCR API

**엔드포인트**: `POST /api/v1/ocr`  
**용도**: 도면에서 텍스트 인식 (치수, 주석, 부품 번호 등)  
**포트**: 5006

### 파라미터 (5개)

#### 1. `det_db_thresh` (float, 0.0-1.0)
- **기본값**: `0.3`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.05
- **설명**: 텍스트 영역 검출 임계값 (Detection 단계)
- **DB**: Differentiable Binarization (텍스트/배경 분리 알고리즘)
- **권장값**:
  - 흐릿한 도면: `0.2 ~ 0.25` (더 많이 검출)
  - 일반 도면 (기본): `0.3 ~ 0.35`
  - 깨끗한 도면: `0.4 ~ 0.5` (정확한 것만)
- **효과**:
  - 낮출수록: 더 많은 텍스트 영역 검출 (노이즈 증가)
  - 높일수록: 확실한 텍스트만 검출 (누락 증가)

#### 2. `det_db_box_thresh` (float, 0.0-1.0)
- **기본값**: `0.5`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.05
- **설명**: 검출된 텍스트 박스의 품질 임계값
- **권장값**:
  - 느슨한 필터: `0.3 ~ 0.4` (더 많은 박스 허용)
  - 균형 (기본): `0.5 ~ 0.6`
  - 엄격한 필터: `0.7 ~ 0.8` (정확한 박스만)
- **det_db_thresh와 차이**:
  - `det_db_thresh`: 텍스트 **영역** 찾기
  - `det_db_box_thresh`: 찾은 영역의 **박스 품질** 검증

#### 3. `use_angle_cls` (boolean)
- **기본값**: `true`
- **설명**: 회전된 텍스트 자동 감지 및 보정
- **처리**:
  - 텍스트 각도 예측 (0°, 90°, 180°, 270°)
  - 자동 회전하여 정방향으로 보정
- **권장값**:
  - 도면 (다양한 각도): `true` (필수)
  - 스캔 문서 (정방향만): `false` (속도 향상)
- **성능 영향**: 처리 시간 약 20% 증가

#### 4. `min_confidence` (float, 0.0-1.0)
- **기본값**: `0.5`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.05
- **설명**: 인식된 텍스트의 최소 신뢰도. 이 값 이하는 결과에서 제외됨
- **인식 단계**: Detection → Recognition → **Filtering**
- **권장값**:
  - 높은 정확도 요구: `0.7 ~ 0.9` (확실한 것만)
  - 균형 (기본): `0.5 ~ 0.6`
  - 최대 추출: `0.3 ~ 0.4` (노이즈 허용)
- **사용 예시**:
  - 부품 번호 (중요): `0.8`
  - 주석 (참고용): `0.4`

#### 5. `visualize` (boolean)
- **기본값**: `false`
- **설명**: OCR 결과 시각화 이미지 생성 (검출된 텍스트 박스 표시)
- **출력**: `visualized_image` (base64 PNG)
- **시각화 내용**:
  - 텍스트 박스 (녹색 테두리)
  - 인식된 텍스트 표시
  - 신뢰도 표시
- **권장값**:
  - 개발/검증: `true`
  - 운영 (대량): `false`

---

## 3️⃣ eDOCr2-v2 API

**엔드포인트**: `POST /api/v1/process`  
**용도**: 통합 OCR (YOLO + PaddleOCR + 후처리)  
**포트**: 5002

### 파라미터 (6개)

#### 1. `extract_dimensions` (boolean)
- **기본값**: `true`
- **설명**: 치수 정보 추출 여부
- **처리 내용**:
  - YOLO로 치수 영역 검출
  - PaddleOCR로 숫자 인식
  - 단위 정규화 (mm, inch 등)
  - 공차 분리 (±0.1, +0.2/-0.1 등)
- **출력 예시**:
  ```json
  {
    "value": "50.0",
    "unit": "mm",
    "tolerance": "±0.1",
    "bbox": {...}
  }
  ```

#### 2. `extract_gdt` (boolean)
- **기본값**: `true`
- **설명**: GD&T (기하공차) 정보 추출 여부
- **처리 내용**:
  - 기하공차 기호 검출 (⏥, ⌭, ◎ 등)
  - 공차값 및 기준면 추출
  - GD&T 프레임 파싱
- **출력 예시**:
  ```json
  {
    "symbol": "⏥ (평행도)",
    "tolerance": "0.05",
    "datum": "A",
    "bbox": {...}
  }
  ```

#### 3. `extract_text` (boolean)
- **기본값**: `true`
- **설명**: 일반 텍스트 추출 여부 (주석, 부품 번호, 재질 등)
- **처리 내용**:
  - 텍스트 블록 검출
  - 전체 텍스트 인식
  - 카테고리 분류 (자동)
- **제외 대상**: 치수/GD&T는 별도 처리

#### 4. `use_vl_model` (boolean)
- **기본값**: `false`
- **설명**: Vision-Language 모델 사용 여부 (고급 분석)
- **처리 내용**:
  - Claude/GPT-4V로 도면 전체 분석
  - 컨텍스트 이해 (치수 간 관계 등)
  - 누락된 정보 추론
- **성능 영향**: 처리 시간 10배 증가 (2초 → 20초)
- **권장값**:
  - 복잡한 도면: `true`
  - 단순 도면: `false`

#### 5. `visualize` (boolean)
- **기본값**: `false`
- **설명**: 전체 분석 결과 시각화 이미지 생성
- **시각화 내용**:
  - 치수: 파란색 박스
  - GD&T: 빨간색 박스
  - 텍스트: 녹색 박스
  - 레이블 및 값 표시

#### 6. `use_gpu_preprocessing` (boolean)
- **기본값**: `false`
- **설명**: GPU 기반 이미지 전처리 사용
- **처리 내용**:
  - CUDA 가속 이미지 변환
  - 대비 향상
  - 노이즈 제거
- **요구사항**: NVIDIA GPU + CUDA
- **성능**: 전처리 속도 5배 향상
- **권장값**:
  - GPU 있음: `true`
  - CPU만: `false` (자동)

---

## 4️⃣ EDGNet API

**엔드포인트**: `POST /api/v1/segment`  
**용도**: 도면 세그멘테이션 (선/텍스트/치수 분리)  
**포트**: 5012

### 파라미터 (5개)

#### 1. `model` (string, select)
- **기본값**: `"graphsage"`
- **옵션**: `graphsage`, `unet`
- **설명**: 세그멘테이션 모델 선택
- **비교**:
  | 특징 | GraphSAGE | U-Net |
  |------|-----------|-------|
  | 속도 | 빠름 (2초) | 느림 (8초) |
  | 정확도 | 좋음 | 매우 좋음 |
  | 메모리 | 적음 | 많음 |
  | 적합 용도 | 실시간 | 최종 분석 |
- **권장값**:
  - 개발/프리뷰: `graphsage`
  - 운영/최종: `unet`

#### 2. `visualize` (boolean)
- **기본값**: `true`
- **설명**: 세그멘테이션 결과 컬러 맵 생성
- **출력**: 각 클래스별 색상으로 표시된 이미지
  - Contour (선): 빨간색
  - Text (텍스트): 녹색
  - Dimension (치수): 파란색

#### 3. `num_classes` (int, select)
- **기본값**: `3`
- **옵션**: `2`, `3`
- **설명**: 분류 클래스 수
- **2-class 모드**: 
  - Text (텍스트)
  - Non-text (나머지)
- **3-class 모드**:
  - Contour (선/외곽선)
  - Text (텍스트)
  - Dimension (치수 표기)
- **권장값**:
  - 단순 분리: `2`
  - 상세 분석: `3`

#### 4. `save_graph` (boolean)
- **기본값**: `false`
- **설명**: 그래프 구조 JSON 저장 (GraphSAGE 모델 전용)
- **출력**: 노드와 엣지 정보가 담긴 JSON
- **사용 예시**: 도면 벡터화, 토폴로지 분석
- **권장값**: 연구/개발 시에만 `true`

#### 5. `vectorize` (boolean)
- **기본값**: `false`
- **설명**: 도면 벡터화 수행 (래스터 → 벡터)
- **출력**: DXF 파일 생성
- **처리**:
  - 세그멘테이션 결과 → Bezier 곡선
  - 직선/호 인식
  - CAD 호환 형식 변환
- **성능 영향**: 처리 시간 3배 증가
- **권장값**: CAD 편집 필요 시에만 `true`

---

## 5️⃣ SkinModel API

**엔드포인트**: `POST /api/v1/predict`  
**용도**: 기하공차 예측 및 제조 가능성 분석  
**포트**: 5003

### 파라미터 (3개 - JSON Body)

**참고**: 이 API는 Form 파라미터가 아닌 JSON Request Body를 사용합니다.

#### 1. `manufacturing_process` (string, optional)
- **기본값**: `"machining"` (자동 추론 시)
- **옵션**: 
  - `machining`: CNC 가공
  - `casting`: 주조
  - `3d_printing`: 3D 프린팅
  - `welding`: 용접
  - `sheet_metal`: 판금
- **설명**: 제조 공정 지정
- **자동 추론**: 값이 없으면 도면 특징에서 자동 추론
- **영향**: 공정별로 다른 공차 기준 적용
  - 가공: ±0.01mm 가능
  - 주조: ±0.5mm 일반
  - 3D 프린팅: ±0.2mm 일반

#### 2. `correlation_length` (float, optional)
- **기본값**: `5.0`
- **범위**: 1.0 ~ 50.0
- **단위**: mm
- **설명**: Random Field 상관 거리 (SkinModel 파라미터)
- **의미**: 인접한 점들의 오차가 얼마나 상관관계를 가지는지
- **권장값**:
  - 작은 부품 (< 100mm): `2.0 ~ 5.0`
  - 중형 부품 (100-500mm): `5.0 ~ 10.0`
  - 대형 부품 (> 500mm): `10.0 ~ 20.0`
- **효과**:
  - 작을수록: 국소적 변형만 고려 (보수적)
  - 클수록: 전역적 변형 고려 (현실적)

#### 3. `task` (string, optional)
- **기본값**: `"tolerance"`
- **옵션**:
  - `tolerance`: 공차 예측
  - `validate`: GD&T 검증
  - `manufacturability`: 제조 가능성 분석
- **설명**: 수행할 작업 종류
- **출력 차이**:
  - `tolerance`: 권장 공차값 제시
  - `validate`: 현재 공차의 적합성 판단
  - `manufacturability`: 제조 난이도 및 비용 예측

---

## 6️⃣ VL API (Vision Language)

**엔드포인트**: `POST /api/v1/analyze`  
**용도**: 이미지 + 텍스트 멀티모달 분석 (VQA, 캡셔닝)  
**포트**: 5004

### 파라미터 (3개)

#### 1. `prompt` (string, optional)
- **기본값**: `None` (캡셔닝 모드)
- **설명**: 이미지에 대한 질문 또는 분석 요청
- **모드 분기**:
  - **prompt 있음**: VQA (Visual Question Answering) 모드
  - **prompt 없음**: Captioning (이미지 설명) 모드
- **사용 예시**:
  ```
  "이 도면의 모든 치수를 추출해주세요"
  "표면 거칠기 기호가 있나요?"
  "어떤 제조 공정이 적합할까요?"
  "부품 번호를 찾아주세요"
  ```
- **입력 매핑**: TextInput 노드에서 `inputs.text`로 연결 가능

#### 2. `model` (string, select)
- **기본값**: `"claude-3-5-sonnet-20241022"`
- **옵션**:
  - `claude-3-5-sonnet-20241022`: Anthropic Claude 3.5 Sonnet (최신, 추천)
  - `gpt-4o`: OpenAI GPT-4 Omni (빠름)
  - `gpt-4-turbo`: OpenAI GPT-4 Turbo (정확함)
- **비교**:
  | 모델 | 속도 | 정확도 | 비용 | 장점 |
  |------|------|--------|------|------|
  | Claude 3.5 | 중간 | 최고 | 중간 | 도면 이해 우수 |
  | GPT-4o | 빠름 | 높음 | 낮음 | 실시간 적합 |
  | GPT-4 Turbo | 느림 | 최고 | 높음 | 복잡한 분석 |
- **권장값**:
  - 일반 분석: `claude-3-5-sonnet-20241022`
  - 실시간: `gpt-4o`
  - 최고 품질: `gpt-4-turbo`

#### 3. `temperature` (float, 0.0-1.0)
- **기본값**: `0.0`
- **범위**: 0.0 ~ 1.0
- **단계**: 0.1
- **설명**: 생성 온도 (창의성 vs 결정성)
- **권장값**:
  - 정확한 추출 (치수, 부품번호): `0.0 ~ 0.1` (결정적)
  - 균형 (일반 질문): `0.3 ~ 0.5`
  - 창의적 분석 (설계 제안): `0.7 ~ 1.0`
- **효과**:
  - `0.0`: 항상 동일한 답변 (재현 가능)
  - `0.5`: 다양한 표현 가능
  - `1.0`: 창의적이지만 불안정

---

## 📊 파라미터 요약표

| API | 총 파라미터 | 필수 | 선택 | 복잡도 |
|-----|-----------|------|------|--------|
| YOLO | 6 | 0 | 6 | 중간 |
| PaddleOCR | 5 | 0 | 5 | 중간 |
| eDOCr2-v2 | 6 | 0 | 6 | 높음 |
| EDGNet | 5 | 0 | 5 | 중간 |
| SkinModel | 3 | 1 | 2 | 높음 |
| VL | 3 | 0 | 3 | 낮음 |

---

## 💡 권장 설정 프리셋

### 빠른 분석 (실시간)
```json
{
  "yolo": {"imgsz": 320, "confidence": 0.6},
  "paddleocr": {"det_db_thresh": 0.3, "visualize": false},
  "edocr2": {"use_vl_model": false},
  "edgnet": {"model": "graphsage"},
  "vl": {"model": "gpt-4o", "temperature": 0.0}
}
```

### 정밀 분석 (최종)
```json
{
  "yolo": {"imgsz": 1280, "confidence": 0.4},
  "paddleocr": {"det_db_thresh": 0.25, "visualize": true},
  "edocr2": {"use_vl_model": true},
  "edgnet": {"model": "unet", "vectorize": true},
  "vl": {"model": "claude-3-5-sonnet-20241022", "temperature": 0.0}
}
```

### 균형 (권장)
```json
{
  "yolo": {"imgsz": 640, "confidence": 0.5},
  "paddleocr": {"det_db_thresh": 0.3, "visualize": false},
  "edocr2": {"use_vl_model": false},
  "edgnet": {"model": "graphsage"},
  "vl": {"model": "claude-3-5-sonnet-20241022", "temperature": 0.0}
}
```

---

**작성**: Claude Code  
**버전**: 1.0  
**상태**: ✅ 완성
