# AX POC 진행 현황 (2024-12-19)

> 도면 분석 AI 파이프라인 빌더 | 컨셉 수립 및 프로토타입 구축 단계

---

## 1. Repository 현황

| 항목 | 내용 |
|------|------|
| **ax/poc** | BlueprintFlow 메인 시스템 (Private) |
| **ax/dockerize-sample** | API 도커라이징 템플릿 → [별도 문서 참조](API_도커라이징_템플릿_가이드.md) |

- 브랜치: `main` / 50+ commits (11월~12월)
- 주요 디렉토리: `web-ui/`, `gateway-api/`, `models/`, `blueprint-ai-bom/`

---

## 2. 컨셉

**BlueprintFlow: 노코드 AI 파이프라인 빌더**

새로운 도면이 들어왔을 때, 웹에서 **드래그앤드롭으로 AI 파이프라인을 자유롭게 조합**하고 결과를 즉시 비교할 수 있는 시스템

```
예시 1) 심볼 검출        : [이미지] → [YOLO] → [결과]

예시 2) P&ID 연결성 분석 : [이미지] → [라인검출] ──┬→ [PID Analyzer] → [연결 관계]
                                  → [YOLO P&ID] ─┘
                         (라인 + 심볼 결과를 조합하여 "밸브-배관 연결" 분석)

예시 3) OCR 벤치마크     : [이미지] → [eDOCr2]    ─┬→ [결과 비교]
                                  → [Paddle]    ─┤
                                  → [Tesseract] ─┘

예시 4) 지식 그래프 연동 : [이미지] → [YOLO] → [Knowledge] → [유사 부품 검색]
                         (검출된 부품으로 과거 프로젝트/비용/규격 조회)
```

**핵심 가치**:
- **자유 조합**: 19개 AI API를 목적에 맞게 연결
- **결과 통합**: 여러 노드 출력을 조합하여 새로운 분석 수행
- **즉시 비교**: 여러 모델 결과를 한 화면에서 벤치마크
- **지식 연동**: 검출 결과를 지식 그래프(Neo4j)와 연결

---

## 3. 시스템 구조

```
┌─────────────────────────────────────────────────────────────┐
│                     Web Dashboard (:5173)                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐   │
│  │ API 모니터링  │  │ BlueprintFlow│  │ Blueprint AI BOM │   │
│  │  (상태/설정)  │  │  (빌더 핵심) │  │  (활용 사례)     │   │
│  └──────────────┘  └──────────────┘  └──────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │   Gateway API     │ ← 파이프라인 실행 엔진
                    │    (:8000)        │
                    └─────────┬─────────┘
     ┌────────────┬──────────┼──────────┬────────────┐
     ▼            ▼          ▼          ▼            ▼
[Detection]    [OCR]    [Segment]  [Analysis]  [Knowledge]
YOLO, PID   eDOCr2 등  라인검출    VL, Skin    Neo4j+RAG
```

**구성 요소**:
- **BlueprintFlow 빌더**: 노드 기반 파이프라인 편집기 (핵심)
- **Gateway API**: 파이프라인 실행 및 노드 간 데이터 전달
- **AI API 모듈**: 검출, OCR, 세그멘테이션, 분석 등 19개 마이크로서비스
- **Knowledge 엔진**: Neo4j 기반 지식 그래프 + GraphRAG/VectorRAG
- **Blueprint AI BOM**: 파이프라인 활용 사례 (Human-in-the-Loop BOM 생성)

---

## 4. 시스템 구축 현황

### 4.1 BlueprintFlow 빌더 (`:5173/blueprintflow`) - 핵심

![BlueprintFlow 예시 위치]

- 드래그앤드롭 노드 편집기 구현
- 21종 노드 지원 (입력, 검출, OCR, 분석, 제어)
- 노드 간 연결 및 실행 흐름 시각화
- 실행 결과 바운딩박스 오버레이

### 4.2 Dashboard (`:5173`)

![Dashboard 예시 위치]

- API 상태 모니터링 (헬스체크, GPU/메모리)
- 하이퍼파라미터 설정 UI
- 컨테이너 관리

### 4.3 Blueprint AI BOM (`:3000`) - 활용 사례

![BOM 시스템 예시 위치]

- BlueprintFlow 파이프라인을 활용한 BOM 생성 워크플로우
- Human-in-the-Loop 검증 (승인/거부/수정)
- Streamlit(8507) POC 기능 웹 버전으로 전환 중

### 4.4 개발 현황 요약

| 구분 | 상태 | 내용 |
|------|------|------|
| BlueprintFlow UI | ✅ | 노드 편집, 연결, 실행 기본 구조 완료 |
| API 모듈 (19개) | ✅ | 개별 API 컨테이너 구동 가능 |
| 파이프라인 실행 | ⚠️ | 노드 간 데이터 전달 정합성 검증 필요 |
| BOM 활용 사례 | ⚠️ | 기본 플로우 구현, 세부 기능 보완 중 |

---

## 5. 향후 방향

**BlueprintFlow 고도화**:
1. 노드 간 입출력 정합성 검증 및 안정화
2. 파이프라인 저장/불러오기 기능
3. 실행 결과 비교 및 히스토리 관리

**활용 사례 확장**:
- BOM 생성 (현재 진행 중)
- 공차 분석 자동화
- P&ID 연결성 분석

---

*작성일: 2024-12-19 | 컨셉 수립 단계, 노드 연동 검증 진행 중*
