# ğŸ¢ AX ë„ë©´ ë¶„ì„ ì‹œìŠ¤í…œ - ì˜¨í”„ë ˆë¯¸ìŠ¤ ë‚©í’ˆ ê°€ì´ë“œ

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ì‘ì„±ì¼**: 2025-11-14
**ëŒ€ìƒ**: ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ êµ¬ì¶• ë° ë‚©í’ˆ

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#1-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì˜¨í”„ë ˆë¯¸ìŠ¤ ìš”êµ¬ì‚¬í•­](#2-ì˜¨í”„ë ˆë¯¸ìŠ¤-ìš”êµ¬ì‚¬í•­)
3. [ë³´ì•ˆ ê³ ë ¤ì‚¬í•­](#3-ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­)
4. [ì™¸ë¶€ ì˜ì¡´ì„± ì œê±° ë°©ì•ˆ](#4-ì™¸ë¶€-ì˜ì¡´ì„±-ì œê±°-ë°©ì•ˆ)
5. [ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì„±](#5-ëª¨ë‹ˆí„°ë§-ì‹œìŠ¤í…œ-êµ¬ì„±)
6. [ì˜¤í”„ë¼ì¸ ì„¤ì¹˜ ì¤€ë¹„](#6-ì˜¤í”„ë¼ì¸-ì„¤ì¹˜-ì¤€ë¹„)
7. [ë‚©í’ˆ íŒ¨í‚¤ì§€ êµ¬ì„±](#7-ë‚©í’ˆ-íŒ¨í‚¤ì§€-êµ¬ì„±)
8. [ì„¤ì¹˜ ì ˆì°¨](#8-ì„¤ì¹˜-ì ˆì°¨)
9. [ê³ ê°ì‚¬ êµìœ¡ ê³„íš](#9-ê³ ê°ì‚¬-êµìœ¡-ê³„íš)
10. [ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ](#10-ìœ ì§€ë³´ìˆ˜-ê°€ì´ë“œ)

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 ì‹œìŠ¤í…œ ëª©ì 

ì œì¡°ì—… ë„ë©´ìœ¼ë¡œë¶€í„° ì¹˜ìˆ˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ ê²¬ì ì„ ìƒì„±í•˜ëŠ” AI ê¸°ë°˜ ì‹œìŠ¤í…œ

**í•µì‹¬ ê°€ì¹˜**:
- âš¡ **ì²˜ë¦¬ ì†ë„**: 8-12ì´ˆ (ê¸°ì¡´ ìˆ˜ì‘ì—… 30-60ë¶„ ëŒ€ë¹„ 300ë°° ë¹ ë¦„)
- ğŸ¯ **ì •í™•ë„**: 95-98% (ì¸ê°„ ì‘ì—…ì ìˆ˜ì¤€)
- ğŸ”„ **ëª¨ë“ˆì„±**: API êµì²´ ê°€ëŠ¥í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜
- ğŸ¢ **ì˜¨í”„ë ˆë¯¸ìŠ¤**: íì‡„ë§ í™˜ê²½ ì§€ì›, ë°ì´í„° ì™¸ë¶€ ìœ ì¶œ ì—†ìŒ

### 1.2 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Web UI (Port 5173)                    â”‚
â”‚              ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ + Admin ëŒ€ì‹œë³´ë“œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Gateway API (Port 8000)                    â”‚
â”‚              íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°                       â”‚
â”‚   â€¢ Hybrid Mode (ì •í™•ë„ 95-98%, 10-15ì´ˆ)                  â”‚
â”‚   â€¢ Speed Mode (ì •í™•ë„ 93%, 8-10ì´ˆ)                       â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚    â”‚    â”‚    â”‚    â”‚    â”‚
   â–¼    â–¼    â–¼    â–¼    â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚eDOCrâ”‚ YOLO â”‚EDGNetâ”‚ Skin â”‚  VL  â”‚Paddle  â”‚
â”‚ 5001â”‚ 5005 â”‚ 5012 â”‚ 5003 â”‚ 5004 â”‚ 5006   â”‚
â”‚ GPU â”‚ GPU  â”‚ CPU  â”‚  ML  â”‚ API  â”‚ CPU    â”‚
â”‚ OCR â”‚ Det. â”‚ Seg. â”‚ Tol. â”‚ LLM  â”‚ OCR    â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Monitoring Stack (Port 9090, 3000)              â”‚
â”‚          Prometheus + Grafana                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | í¬íŠ¸ | ê¸°ëŠ¥ | GPU | ì™¸ë¶€ ì˜ì¡´ì„± |
|---------|------|------|-----|-----------|
| **Web UI** | 5173 | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ | âŒ | âŒ |
| **Gateway API** | 8000 | íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° | âŒ | âŒ |
| **eDOCr2 API** | 5001 | í•œê¸€ OCR ì—”ì§„ | âœ… | âŒ |
| **YOLO API** | 5005 | ê°ì²´ íƒì§€ | âœ… | âŒ |
| **EDGNet API** | 5012 | ê·¸ë˜í”„ ê¸°ë°˜ ì„¸ê·¸ë©˜í…Œì´ì…˜ | âŒ | âŒ |
| **Skin Model API** | 5003 | ê³µì°¨ ì˜ˆì¸¡ (XGBoost) | âŒ | âŒ |
| **VL API** | 5004 | Vision-Language ëª¨ë¸ | âŒ | âš ï¸ **ìˆìŒ** |
| **PaddleOCR API** | 5006 | ì¤‘êµ­ì–´ OCR (ì„ íƒ) | âŒ | âŒ |
| **Prometheus** | 9090 | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ | âŒ | âŒ |
| **Grafana** | 3000 | ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ | âŒ | âŒ |
| **Admin Dashboard** | 9000 | ê´€ë¦¬ì ë°±ì—”ë“œ | âŒ | âŒ |

---

## 2. ì˜¨í”„ë ˆë¯¸ìŠ¤ ìš”êµ¬ì‚¬í•­

### 2.1 í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

#### ìµœì†Œ ì‚¬ì–‘ (í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½)

```
CPU: Intel Xeon E5-2640 v4 (10ì½”ì–´) ë˜ëŠ” ë™ê¸‰
RAM: 32GB DDR4
GPU: NVIDIA RTX 3060 (12GB VRAM) ë˜ëŠ” ë™ê¸‰
Storage: 500GB SSD
Network: 1Gbps Ethernet
```

#### ê¶Œì¥ ì‚¬ì–‘ (í”„ë¡œë•ì…˜ í™˜ê²½)

```
CPU: Intel Xeon Gold 6248R (24ì½”ì–´) ë˜ëŠ” AMD EPYC 7402P
RAM: 64GB DDR4 ECC
GPU: NVIDIA RTX 3080 (16GB VRAM) ë˜ëŠ” A4000
Storage: 1TB NVMe SSD (ì‹œìŠ¤í…œ) + 2TB SSD (ë°ì´í„°)
Network: 10Gbps Ethernet
RAID: RAID 1 (ë°ì´í„° ë°±ì—…)
UPS: 1500VA ì´ìƒ (ì •ì „ ëŒ€ë¹„)
```

#### GPU ìš”êµ¬ì‚¬í•­ ìƒì„¸

| API | GPU í•„ìš” | VRAM ì‚¬ìš©ëŸ‰ | ëŒ€ì•ˆ (GPU ì—†ì„ ì‹œ) |
|-----|---------|------------|-------------------|
| eDOCr2 | í•„ìˆ˜ | 2-4GB | CPU ëª¨ë“œ (5ë°° ëŠë¦¼) |
| YOLO | í•„ìˆ˜ | 1-2GB | CPU ëª¨ë“œ (10ë°° ëŠë¦¼) |
| EDGNet | ì„ íƒ | 0.5-1GB | CPU ëª¨ë“œ (2ë°° ëŠë¦¼) |
| ê¸°íƒ€ | ë¶ˆí•„ìš” | - | - |

### 2.2 ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­

#### ìš´ì˜ì²´ì œ

```
âœ… ì§€ì›: Ubuntu 20.04/22.04 LTS
âœ… ì§€ì›: CentOS 7.9+ / Rocky Linux 8+
âœ… ì§€ì›: Red Hat Enterprise Linux 8+
âŒ ë¯¸ì§€ì›: Windows Server (Docker Desktop ì œí•œ ì‚¬í•­)
```

#### í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´

```bash
# Docker Engine
Docker: 24.0.0+
Docker Compose: 2.20.0+

# NVIDIA GPU ë“œë¼ì´ë²„ (GPU ì‚¬ìš© ì‹œ)
NVIDIA Driver: 525.0+
NVIDIA Container Toolkit: latest

# ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€
Python: 3.9+ (ìŠ¤í¬ë¦½íŠ¸ìš©)
curl, wget, tar, gzip
```

### 2.3 ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­

#### í¬íŠ¸ ì‚¬ìš© (ë°©í™”ë²½ ì„¤ì • í•„ìš”)

```bash
# ì™¸ë¶€ ì ‘ê·¼ (ì‚¬ìš©ì)
5173/tcp  - Web UI

# ë‚´ë¶€ í†µì‹  (ì„œë¹„ìŠ¤ ê°„)
8000/tcp  - Gateway API
5001/tcp  - eDOCr2 API
5005/tcp  - YOLO API
5012/tcp  - EDGNet API
5003/tcp  - Skin Model API
5004/tcp  - VL API
5006/tcp  - PaddleOCR API
9000/tcp  - Admin Dashboard API

# ëª¨ë‹ˆí„°ë§ (ê´€ë¦¬ìë§Œ)
9090/tcp  - Prometheus
3000/tcp  - Grafana

# SSH (ê´€ë¦¬ìë§Œ)
22/tcp    - SSH ì ‘ì†
```

#### ì¸í„°ë„· ì—°ê²°

```
âœ… ì™„ì „ ì˜¤í”„ë¼ì¸ (íì‡„ë§): ì§€ì›
   - VL API ë¹„í™œì„±í™” ë˜ëŠ” ë¡œì»¬ LLM ì‚¬ìš©
   - ëª¨ë“  Docker ì´ë¯¸ì§€ ì‚¬ì „ ì¤€ë¹„
   - ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì˜¤í”„ë¼ì¸ ë²ˆë“¤

âš ï¸ ì œí•œì  ì¸í„°ë„·: ì§€ì› (ê¶Œì¥)
   - VL APIë§Œ ì¸í„°ë„· í•„ìš” (ì„ íƒì‚¬í•­)
   - Docker Hub ì ‘ê·¼ ë¶ˆí•„ìš” (ì‚¬ì „ ë¡œë“œ)
```

---

## 3. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 3.1 ë°ì´í„° ë³´ì•ˆ

#### ë„ë©´ íŒŒì¼ ì²˜ë¦¬

```
âŒ ì™¸ë¶€ ì €ì¥ì†Œ ì—…ë¡œë“œ: ì ˆëŒ€ ì—†ìŒ
âœ… ë¡œì»¬ ì²˜ë¦¬: ëª¨ë“  ì²˜ë¦¬ ì˜¨í”„ë ˆë¯¸ìŠ¤ ë‚´ë¶€
âœ… ì„ì‹œ íŒŒì¼: ì²˜ë¦¬ í›„ ìë™ ì‚­ì œ (24ì‹œê°„)
âœ… ë°±ì—…: ê³ ê°ì‚¬ ì •ì±…ì— ë”°ë¦„
```

#### ì•”í˜¸í™”

```python
# ì €ì¥ ì‹œ ì•”í˜¸í™” (AES-256)
ENCRYPTION_ENABLED = true
ENCRYPTION_KEY_PATH = /opt/ax-system/keys/encryption.key

# ì „ì†¡ ì‹œ ì•”í˜¸í™” (TLS 1.3)
TLS_ENABLED = true
TLS_CERT_PATH = /opt/ax-system/certs/server.crt
TLS_KEY_PATH = /opt/ax-system/certs/server.key
```

### 3.2 ì ‘ê·¼ ì œì–´

#### ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)

| ì—­í•  | ê¶Œí•œ | ì ‘ê·¼ ë²”ìœ„ |
|-----|------|----------|
| **ê´€ë¦¬ì** | ì „ì²´ | ì‹œìŠ¤í…œ ì„¤ì •, ëª¨ë¸ ê´€ë¦¬, ì‚¬ìš©ì ê´€ë¦¬, ëª¨ë‹ˆí„°ë§ |
| **ìš´ì˜ì** | ì œí•œì  | ë„ë©´ ì²˜ë¦¬, ë¡œê·¸ ì¡°íšŒ, ê¸°ë³¸ ëª¨ë‹ˆí„°ë§ |
| **ì‚¬ìš©ì** | ìµœì†Œ | ë„ë©´ ì—…ë¡œë“œ, ê²°ê³¼ ë‹¤ìš´ë¡œë“œë§Œ |
| **ê°ì‚¬ì** | ì½ê¸° ì „ìš© | ê°ì‚¬ ë¡œê·¸, í†µê³„ ì¡°íšŒë§Œ |

#### ì¸ì¦ ë°©ì‹

```yaml
# config/auth.yml
auth:
  method: api_key  # ë˜ëŠ” ldap, oauth2
  api_key:
    enabled: true
    header_name: X-API-Key
    keys:
      - key: "admin-key-xxxxx"
        role: admin
        description: "ê´€ë¦¬ì í‚¤"
      - key: "operator-key-xxxxx"
        role: operator
        description: "ìš´ì˜ì í‚¤"

  session:
    timeout: 3600  # 1ì‹œê°„
    max_concurrent: 3  # ë™ì‹œ ì„¸ì…˜ ì œí•œ
```

### 3.3 ê°ì‚¬ ë¡œê·¸

#### ë¡œê·¸ ê¸°ë¡ í•­ëª©

```json
{
  "timestamp": "2025-11-14T13:30:00Z",
  "user": "operator01",
  "action": "upload_drawing",
  "resource": "drawing_12345.pdf",
  "ip_address": "192.168.1.100",
  "result": "success",
  "processing_time": 12.5,
  "metadata": {
    "file_size": 2048576,
    "pages": 3
  }
}
```

#### ë¡œê·¸ ë³´ê´€

```
ìœ„ì¹˜: /opt/ax-system/logs/audit/
í˜•ì‹: JSON Lines (JSONL)
ë³´ê´€ ê¸°ê°„: 2ë…„ (ê³ ê°ì‚¬ ì •ì±…ì— ë”°ë¦„)
ë¡œí…Œì´ì…˜: ë§¤ì¼ (gzip ì••ì¶•)
ë°±ì—…: ë³„ë„ ìŠ¤í† ë¦¬ì§€ì— ìë™ ë³µì‚¬
```

### 3.4 ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ

#### ë°©í™”ë²½ ê·œì¹™ (iptables)

```bash
# ê¸°ë³¸ ì •ì±…: ëª¨ë‘ ì°¨ë‹¨
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

# í—ˆìš©: Loopback
iptables -A INPUT -i lo -j ACCEPT

# í—ˆìš©: ê¸°ì¡´ ì—°ê²° ìœ ì§€
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# í—ˆìš©: Web UI (íŠ¹ì • IPë§Œ)
iptables -A INPUT -p tcp --dport 5173 -s 192.168.1.0/24 -j ACCEPT

# í—ˆìš©: SSH (íŠ¹ì • IPë§Œ)
iptables -A INPUT -p tcp --dport 22 -s 192.168.1.0/24 -j ACCEPT

# í—ˆìš©: Prometheus/Grafana (ê´€ë¦¬ì ë„¤íŠ¸ì›Œí¬ë§Œ)
iptables -A INPUT -p tcp --dport 9090 -s 192.168.1.10 -j ACCEPT
iptables -A INPUT -p tcp --dport 3000 -s 192.168.1.10 -j ACCEPT

# ì €ì¥
iptables-save > /etc/iptables/rules.v4
```

#### Docker ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬

```yaml
# docker-compose.yml
networks:
  frontend:
    driver: bridge
    internal: false  # ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥
  backend:
    driver: bridge
    internal: true   # ë‚´ë¶€ í†µì‹ ë§Œ
  monitoring:
    driver: bridge
    internal: true   # ëª¨ë‹ˆí„°ë§ ì „ìš©
```

---

## 4. ì™¸ë¶€ ì˜ì¡´ì„± ì œê±° ë°©ì•ˆ

### 4.1 VL API ì™¸ë¶€ ì˜ì¡´ì„± ë¶„ì„

#### í˜„ì¬ ìƒíƒœ

```python
# vl-api/api_server.py
ANTHROPIC_API_KEY = os.getenv("ANTHROPIC_API_KEY", "")
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "")

# ì™¸ë¶€ API í˜¸ì¶œ
async def call_claude_vision(image, prompt):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "https://api.anthropic.com/v1/messages",  # âŒ ì™¸ë¶€ API
            headers={"x-api-key": ANTHROPIC_API_KEY},
            json=payload
        )
```

**ë¬¸ì œì **:
- âŒ ë„ë©´ ë°ì´í„°ê°€ ì™¸ë¶€ ì„œë²„(Anthropic, OpenAI)ë¡œ ì „ì†¡ë¨
- âŒ ì¸í„°ë„· ì—°ê²° í•„ìˆ˜
- âŒ íì‡„ë§ í™˜ê²½ ì‚¬ìš© ë¶ˆê°€
- âŒ ë¹„ìš© ë°œìƒ (API ì‚¬ìš©ë£Œ)

### 4.2 í•´ê²° ë°©ì•ˆ

#### ë°©ì•ˆ 1: VL API ë¹„í™œì„±í™” (ê¶Œì¥)

VL APIëŠ” ì„ íƒì  ê¸°ëŠ¥ì´ë¯€ë¡œ ë¹„í™œì„±í™”í•´ë„ í•µì‹¬ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥

```yaml
# docker-compose.yml
services:
  vl-api:
    # image: vl-api:latest
    # ì£¼ì„ ì²˜ë¦¬í•˜ì—¬ ë¹„í™œì„±í™”
    profiles:
      - optional  # í•„ìš” ì‹œì—ë§Œ í™œì„±í™”
```

```python
# gateway-api/api_server.py
# VL API í˜¸ì¶œ ë¶€ë¶„ì„ ì˜µì…˜ìœ¼ë¡œ ë³€ê²½
VL_ENABLED = os.getenv("VL_ENABLED", "false").lower() == "true"

if VL_ENABLED:
    vl_result = await call_vl_api(...)
else:
    logger.info("VL API disabled - skipping")
```

**ì¥ì **:
- âœ… ì™„ì „ ì˜¤í”„ë¼ì¸ ìš´ì˜ ê°€ëŠ¥
- âœ… ì™¸ë¶€ ë°ì´í„° ìœ ì¶œ ì—†ìŒ
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥

**ë‹¨ì **:
- âš ï¸ ì •ë³´ ë¸”ë¡ ì¶”ì¶œ ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€
- âš ï¸ ê³ ê¸‰ ë¶„ì„ ê¸°ëŠ¥ ì œí•œ

#### ë°©ì•ˆ 2: ë¡œì»¬ LLMìœ¼ë¡œ ëŒ€ì²´ (ìµœì )

ì˜¤í”ˆì†ŒìŠ¤ LLMì„ ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ì—¬ VL API ëŒ€ì²´

**ì¶”ì²œ ëª¨ë¸**:
```
1. Llama 3.2 Vision (11B)
   - Meta ê³µê°œ ëª¨ë¸
   - Vision-Language ì§€ì›
   - GPU 16GB í•„ìš”
   - ìƒì—…ì  ì‚¬ìš© ê°€ëŠ¥

2. CogVLM2 (19B)
   - ì¤‘êµ­ì–´ ê°•ì 
   - Vision-Language ì „ë¬¸
   - GPU 24GB í•„ìš”

3. LLaVA 1.6 (7B/13B)
   - ê°€ë²¼ìš´ ëª¨ë¸
   - GPU 8GB~16GB
   - ë¹ ë¥¸ ì¶”ë¡  ì†ë„
```

**êµ¬í˜„ ì˜ˆì‹œ** (Llama 3.2 Vision):

```python
# vl-api/local_llm.py
import torch
from transformers import AutoProcessor, AutoModelForVision2Seq

class LocalVLM:
    def __init__(self, model_name="meta-llama/Llama-3.2-11B-Vision"):
        self.device = "cuda" if torch.cuda.is_available() else "cpu"
        self.processor = AutoProcessor.from_pretrained(model_name)
        self.model = AutoModelForVision2Seq.from_pretrained(
            model_name,
            torch_dtype=torch.float16,
            device_map="auto"
        )

    async def analyze_drawing(self, image, prompt):
        inputs = self.processor(
            text=prompt,
            images=image,
            return_tensors="pt"
        ).to(self.device)

        with torch.no_grad():
            outputs = self.model.generate(**inputs, max_new_tokens=500)

        result = self.processor.decode(outputs[0], skip_special_tokens=True)
        return result

# api_server.pyì—ì„œ ì‚¬ìš©
USE_LOCAL_LLM = os.getenv("USE_LOCAL_LLM", "false").lower() == "true"

if USE_LOCAL_LLM:
    vlm = LocalVLM()
else:
    vlm = None  # ì™¸ë¶€ API ì‚¬ìš©
```

**Docker êµ¬ì„±**:

```dockerfile
# vl-api/Dockerfile.local
FROM nvidia/cuda:12.1.0-runtime-ubuntu22.04

RUN pip install torch transformers accelerate

# ëª¨ë¸ ê°€ì¤‘ì¹˜ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ (ì˜¤í”„ë¼ì¸ ëŒ€ë¹„)
RUN python3 -c "from transformers import AutoModelForVision2Seq; \
                AutoModelForVision2Seq.from_pretrained('meta-llama/Llama-3.2-11B-Vision')"

COPY local_llm.py /app/
COPY api_server.py /app/

CMD ["python3", "/app/api_server.py"]
```

**ì¥ì **:
- âœ… ì™„ì „ ì˜¤í”„ë¼ì¸ ìš´ì˜
- âœ… ì™¸ë¶€ ë°ì´í„° ìœ ì¶œ ì—†ìŒ
- âœ… API ë¹„ìš© ì—†ìŒ
- âœ… VL API ê¸°ëŠ¥ ìœ ì§€

**ë‹¨ì **:
- âš ï¸ GPU ë©”ëª¨ë¦¬ ì¶”ê°€ í•„ìš” (16GB+)
- âš ï¸ ì„±ëŠ¥ ì•½ê°„ ì €í•˜ (Claude ëŒ€ë¹„ 90-95%)
- âš ï¸ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ í¬ê¸° (20-40GB)

#### ë°©ì•ˆ 3: Hybrid ëª¨ë“œ (ìœ ì—°ì„±)

ì˜¨í”„ë ˆë¯¸ìŠ¤ + í´ë¼ìš°ë“œ ì„ íƒì  ì‚¬ìš©

```python
# config.yml
vl_mode: hybrid  # local, cloud, hybrid

vl_config:
  default: local  # ê¸°ë³¸ì€ ë¡œì»¬ LLM
  fallback: cloud  # ì‹¤íŒ¨ ì‹œ í´ë¼ìš°ë“œ
  sensitive_data_policy: local_only  # ë¯¼ê° ë°ì´í„°ëŠ” ë¡œì»¬ë§Œ
```

### 4.3 ê¶Œì¥ ì„¤ì • (ì˜¨í”„ë ˆë¯¸ìŠ¤)

```yaml
# config/deployment.yml
deployment:
  mode: onpremise
  internet: false

  vl_api:
    enabled: true
    mode: local  # local, cloud, disabled
    model: llama-3.2-11b-vision

  security:
    data_encryption: true
    audit_logging: true
    external_api_block: true
```

---

## 5. ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì„±

### 5.1 Prometheus ì„¤ì •

#### prometheus.yml

```yaml
# config/prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'onpremise-production'
    site: 'customer-site-01'

# ì•Œë¦¼ ê·œì¹™
rule_files:
  - 'alerts/*.yml'

# ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ëŒ€ìƒ
scrape_configs:
  # Gateway API
  - job_name: 'gateway-api'
    static_configs:
      - targets: ['gateway-api:8000']
    metrics_path: '/metrics'

  # eDOCr2 API
  - job_name: 'edocr2-api'
    static_configs:
      - targets: ['edocr2-api:5001']

  # YOLO API
  - job_name: 'yolo-api'
    static_configs:
      - targets: ['yolo-api:5005']

  # EDGNet API
  - job_name: 'edgnet-api'
    static_configs:
      - targets: ['edgnet-api:5012']

  # Skin Model API
  - job_name: 'skinmodel-api'
    static_configs:
      - targets: ['skinmodel-api:5003']

  # Admin Dashboard
  - job_name: 'admin-dashboard'
    static_configs:
      - targets: ['admin-dashboard:9000']

  # Node Exporter (ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­)
  - job_name: 'node'
    static_configs:
      - targets: ['node-exporter:9100']

  # NVIDIA GPU (nvidia-smi)
  - job_name: 'nvidia-gpu'
    static_configs:
      - targets: ['nvidia-gpu-exporter:9835']

# ë°ì´í„° ë³´ê´€
storage:
  tsdb:
    retention.time: 90d  # 90ì¼
    retention.size: 50GB
```

#### ì•Œë¦¼ ê·œì¹™ (alerts/api_alerts.yml)

```yaml
# config/prometheus/alerts/api_alerts.yml
groups:
  - name: api_alerts
    interval: 30s
    rules:
      # API ë‹¤ìš´ ì•Œë¦¼
      - alert: APIDown
        expr: up{job=~".*-api"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "API {{ $labels.job }} is down"
          description: "{{ $labels.job }} has been down for more than 1 minute"

      # ë†’ì€ ì—ëŸ¬ìœ¨
      - alert: HighErrorRate
        expr: rate(http_requests_total{status="500"}[5m]) > 0.05
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High error rate on {{ $labels.job }}"
          description: "Error rate is {{ $value }}% over 5 minutes"

      # ëŠë¦° ì‘ë‹µ ì‹œê°„
      - alert: SlowResponseTime
        expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 10
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Slow response time on {{ $labels.job }}"
          description: "95th percentile is {{ $value }}s"

      # GPU ë©”ëª¨ë¦¬ ë¶€ì¡±
      - alert: GPUMemoryHigh
        expr: nvidia_gpu_memory_used_bytes / nvidia_gpu_memory_total_bytes > 0.9
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "GPU memory usage is high"
          description: "GPU {{ $labels.gpu }} memory usage is {{ $value }}%"

      # ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±
      - alert: DiskSpaceLow
        expr: node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes < 0.1
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Disk space is running low"
          description: "Only {{ $value }}% disk space remaining"
```

### 5.2 Grafana ëŒ€ì‹œë³´ë“œ

#### ëŒ€ì‹œë³´ë“œ 1: ìš´ì˜ ëŒ€ì‹œë³´ë“œ (ê³ ê°ì‚¬ ITíŒ€ìš©)

```json
{
  "dashboard": {
    "title": "AX ë„ë©´ ë¶„ì„ ì‹œìŠ¤í…œ - ìš´ì˜ í˜„í™©",
    "panels": [
      {
        "title": "ì‹œìŠ¤í…œ ìƒíƒœ",
        "type": "stat",
        "targets": [{
          "expr": "up{job=~\".*-api\"}"
        }],
        "fieldConfig": {
          "overrides": [{
            "matcher": { "id": "byName", "options": "up" },
            "properties": [{
              "id": "thresholds",
              "value": {
                "steps": [
                  { "value": 0, "color": "red" },
                  { "value": 1, "color": "green" }
                ]
              }
            }]
          }]
        }
      },
      {
        "title": "ì²˜ë¦¬ëœ ë„ë©´ ìˆ˜ (ì¼ë³„)",
        "type": "graph",
        "targets": [{
          "expr": "sum(increase(drawings_processed_total[1d]))"
        }]
      },
      {
        "title": "í‰ê·  ì²˜ë¦¬ ì‹œê°„",
        "type": "gauge",
        "targets": [{
          "expr": "avg(rate(processing_time_seconds_sum[5m]) / rate(processing_time_seconds_count[5m]))"
        }],
        "fieldConfig": {
          "thresholds": {
            "steps": [
              { "value": 0, "color": "green" },
              { "value": 10, "color": "yellow" },
              { "value": 20, "color": "red" }
            ]
          }
        }
      },
      {
        "title": "ì‹œìŠ¤í…œ ê°€ìš©ë¥  (SLA)",
        "type": "stat",
        "targets": [{
          "expr": "avg_over_time(up{job=\"gateway-api\"}[30d]) * 100"
        }],
        "fieldConfig": {
          "unit": "percent",
          "decimals": 2
        }
      }
    ]
  }
}
```

#### ëŒ€ì‹œë³´ë“œ 2: ê¸°ìˆ  ëŒ€ì‹œë³´ë“œ (ê°œë°œ/ìœ ì§€ë³´ìˆ˜íŒ€ìš©)

íŒ¨ë„:
- API ì‘ë‹µ ì‹œê°„ (p50, p95, p99)
- GPU ë©”ëª¨ë¦¬/í™œìš©ë¥  ì¶”ì´
- ì—ëŸ¬ìœ¨ (5xx, 4xx)
- ì²˜ë¦¬ëŸ‰ (RPS)
- í ëŒ€ê¸° ì‹œê°„

#### ëŒ€ì‹œë³´ë“œ 3: ê²½ì˜ì§„ ëŒ€ì‹œë³´ë“œ

íŒ¨ë„:
- ì›”ë³„ ì²˜ë¦¬ ë„ë©´ ìˆ˜
- í‰ê·  ì²˜ë¦¬ ì‹œê°„ ì¶”ì´
- ì‹œìŠ¤í…œ ê°€ìš©ë¥  (99.x%)
- ë¹„ìš© ì ˆê° íš¨ê³¼ (ìë™í™” ì „í›„ ë¹„êµ)

### 5.3 ì•Œë¦¼ ì—°ë™

#### ì´ë©”ì¼ ì•Œë¦¼

```yaml
# config/grafana/provisioning/notifiers/email.yml
notifiers:
  - name: email-admin
    type: email
    uid: email-admin
    settings:
      addresses: admin@company.com
      singleEmail: false
    isDefault: true
```

#### Slack ì•Œë¦¼ (ì„ íƒ)

```yaml
# config/grafana/provisioning/notifiers/slack.yml
notifiers:
  - name: slack-ops
    type: slack
    uid: slack-ops
    settings:
      url: https://hooks.slack.com/services/xxx/yyy/zzz
      recipient: '#ops-alerts'
```

---

## 6. ì˜¤í”„ë¼ì¸ ì„¤ì¹˜ ì¤€ë¹„

### 6.1 Docker ì´ë¯¸ì§€ Export

```bash
#!/bin/bash
# scripts/export_images.sh

echo "Docker ì´ë¯¸ì§€ Export ì‹œì‘..."

# ì´ë¯¸ì§€ ëª©ë¡
IMAGES=(
    "poc_web-ui:latest"
    "poc_gateway-api:latest"
    "poc_edocr2-api:latest"
    "poc_yolo-api:latest"
    "poc_edgnet-api:latest"
    "poc_skinmodel-api:latest"
    "poc_vl-api:latest"
    "poc_paddleocr-api:latest"
    "prom/prometheus:latest"
    "grafana/grafana:latest"
    "prom/node-exporter:latest"
    "nvidia/gpu-exporter:latest"
)

# Export ë””ë ‰í† ë¦¬
EXPORT_DIR="./docker-images"
mkdir -p "$EXPORT_DIR"

# ê° ì´ë¯¸ì§€ Export
for IMAGE in "${IMAGES[@]}"; do
    FILENAME=$(echo $IMAGE | tr '/:' '_')
    echo "Exporting $IMAGE -> $FILENAME.tar"
    docker save "$IMAGE" -o "$EXPORT_DIR/$FILENAME.tar"

    # ì••ì¶• (ì„ íƒ)
    # gzip "$EXPORT_DIR/$FILENAME.tar"
done

echo "âœ… Export ì™„ë£Œ!"
echo "ì´ í¬ê¸°:"
du -sh "$EXPORT_DIR"
```

**Export ê²°ê³¼**:
```
docker-images/
â”œâ”€â”€ poc_web-ui_latest.tar          (200 MB)
â”œâ”€â”€ poc_gateway-api_latest.tar     (1.2 GB)
â”œâ”€â”€ poc_edocr2-api_latest.tar      (2.5 GB)
â”œâ”€â”€ poc_yolo-api_latest.tar        (1.8 GB)
â”œâ”€â”€ poc_edgnet-api_latest.tar      (1.1 GB)
â”œâ”€â”€ poc_skinmodel-api_latest.tar   (800 MB)
â”œâ”€â”€ poc_vl-api_latest.tar          (500 MB)
â”œâ”€â”€ poc_paddleocr-api_latest.tar   (600 MB)
â”œâ”€â”€ prom_prometheus_latest.tar     (300 MB)
â”œâ”€â”€ grafana_grafana_latest.tar     (400 MB)
â”œâ”€â”€ prom_node-exporter_latest.tar  (50 MB)
â””â”€â”€ nvidia_gpu-exporter_latest.tar (100 MB)

ì´ í¬ê¸°: ~9.5 GB
```

### 6.2 ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ë²ˆë“¤

```bash
#!/bin/bash
# scripts/prepare_offline_packages.sh

BUNDLE_DIR="./offline-packages"
mkdir -p "$BUNDLE_DIR"

# Python íŒ¨í‚¤ì§€
pip download -r requirements.txt -d "$BUNDLE_DIR/python-wheels"

# ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ (Ubuntu)
apt-get download $(cat packages.txt) -d "$BUNDLE_DIR/deb-packages"

# ë˜ëŠ” CentOS/RHEL
# yumdownloader --resolve --destdir="$BUNDLE_DIR/rpm-packages" $(cat packages.txt)
```

### 6.3 ëª¨ë¸ ê°€ì¤‘ì¹˜ ì¤€ë¹„

```bash
# scripts/prepare_models.sh

MODEL_DIR="./model-weights"
mkdir -p "$MODEL_DIR"

# EDGNet Large
cp /home/uproot/ax/poc/edgnet-api/models/edgnet_large.pth "$MODEL_DIR/"

# YOLO
cp /home/uproot/ax/poc/yolo-api/models/yolo11n.pt "$MODEL_DIR/"

# Skin Model
cp -r /home/uproot/ax/poc/skinmodel-api/models/skinmodel_xgboost "$MODEL_DIR/"

# ë¡œì»¬ LLM (ì„ íƒ)
# huggingface-cli download meta-llama/Llama-3.2-11B-Vision --local-dir "$MODEL_DIR/llama-3.2-11b-vision"
```

---

## 7. ë‚©í’ˆ íŒ¨í‚¤ì§€ êµ¬ì„±

### 7.1 ìµœì¢… ë‚©í’ˆë¬¼ êµ¬ì¡°

```
AX_Drawing_Analysis_System_v1.0.0/
â”œâ”€â”€ README.txt                          # ì‹œì‘ ê°€ì´ë“œ
â”œâ”€â”€ LICENSE.txt                         # ë¼ì´ì„ ìŠ¤
â”œâ”€â”€ RELEASE_NOTES.txt                   # ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸
â”‚
â”œâ”€â”€ docker-images/                      # Docker ì´ë¯¸ì§€ (9.5GB)
â”‚   â”œâ”€â”€ *.tar
â”‚   â””â”€â”€ checksums.txt                   # SHA256 ì²´í¬ì„¬
â”‚
â”œâ”€â”€ offline-packages/                   # ì˜¤í”„ë¼ì¸ íŒ¨í‚¤ì§€
â”‚   â”œâ”€â”€ python-wheels/                  # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ deb-packages/                   # Ubuntu íŒ¨í‚¤ì§€
â”‚   â””â”€â”€ rpm-packages/                   # CentOS íŒ¨í‚¤ì§€
â”‚
â”œâ”€â”€ model-weights/                      # í•™ìŠµëœ ëª¨ë¸ (2GB)
â”‚   â”œâ”€â”€ edgnet_large.pth
â”‚   â”œâ”€â”€ yolo11n.pt
â”‚   â”œâ”€â”€ skinmodel_xgboost/
â”‚   â””â”€â”€ llama-3.2-11b-vision/ (ì„ íƒ)
â”‚
â”œâ”€â”€ scripts/                            # ì„¤ì¹˜/ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ install.sh                      # ìë™ ì„¤ì¹˜
â”‚   â”œâ”€â”€ uninstall.sh                    # ì œê±°
â”‚   â”œâ”€â”€ backup.sh                       # ë°±ì—…
â”‚   â”œâ”€â”€ restore.sh                      # ë³µêµ¬
â”‚   â”œâ”€â”€ check_system.sh                 # ì‚¬ì „ ì ê²€
â”‚   â”œâ”€â”€ update.sh                       # ì—…ë°ì´íŠ¸
â”‚   â”œâ”€â”€ health_check.sh                 # í—¬ìŠ¤ ì²´í¬
â”‚   â””â”€â”€ export_logs.sh                  # ë¡œê·¸ ì¶”ì¶œ
â”‚
â”œâ”€â”€ config/                             # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ docker-compose.yml              # ë©”ì¸ êµ¬ì„±
â”‚   â”œâ”€â”€ docker-compose.monitoring.yml   # ëª¨ë‹ˆí„°ë§
â”‚   â”œâ”€â”€ .env.template                   # í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ prometheus/
â”‚   â”‚   â”œâ”€â”€ prometheus.yml
â”‚   â”‚   â””â”€â”€ alerts/
â”‚   â”œâ”€â”€ grafana/
â”‚   â”‚   â”œâ”€â”€ dashboards/
â”‚   â”‚   â””â”€â”€ provisioning/
â”‚   â””â”€â”€ nginx/
â”‚       â””â”€â”€ nginx.conf
â”‚
â”œâ”€â”€ docs/                               # ë¬¸ì„œ (PDF)
â”‚   â”œâ”€â”€ 00_ë¹ ë¥¸ì‹œì‘ê°€ì´ë“œ.pdf
â”‚   â”œâ”€â”€ 01_ì„¤ì¹˜ê°€ì´ë“œ.pdf
â”‚   â”œâ”€â”€ 02_ê´€ë¦¬ìë§¤ë‰´ì–¼.pdf
â”‚   â”œâ”€â”€ 03_ì‚¬ìš©ìê°€ì´ë“œ.pdf
â”‚   â”œâ”€â”€ 04_íŠ¸ëŸ¬ë¸”ìŠˆíŒ….pdf
â”‚   â”œâ”€â”€ 05_APIë ˆí¼ëŸ°ìŠ¤.pdf
â”‚   â”œâ”€â”€ 06_ë³´ì•ˆê°€ì´ë“œ.pdf
â”‚   â”œâ”€â”€ 07_ë°±ì—…ë³µêµ¬ê°€ì´ë“œ.pdf
â”‚   â””â”€â”€ 08_ì—…ê·¸ë ˆì´ë“œê°€ì´ë“œ.pdf
â”‚
â”œâ”€â”€ training/                           # êµìœ¡ ìë£Œ
â”‚   â”œâ”€â”€ slides/                         # PPT
â”‚   â”œâ”€â”€ hands-on/                       # ì‹¤ìŠµ ìë£Œ
â”‚   â””â”€â”€ videos/                         # ë™ì˜ìƒ (ì„ íƒ)
â”‚
â””â”€â”€ tools/                              # ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ test-dataset/                   # í…ŒìŠ¤íŠ¸ ë„ë©´
    â”œâ”€â”€ performance-test.sh             # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
    â””â”€â”€ migration-tool.py               # ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
```

### 7.2 ì²´í¬ì„¬ ìƒì„±

```bash
# scripts/generate_checksums.sh

cd docker-images
sha256sum *.tar > checksums.txt

# ê²€ì¦
sha256sum -c checksums.txt
```

---

## 8. ì„¤ì¹˜ ì ˆì°¨

### 8.1 ì‚¬ì „ ì ê²€

```bash
#!/bin/bash
# scripts/check_system.sh

echo "==================================="
echo "AX ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ ì ê²€"
echo "==================================="

# OS í™•ì¸
echo -n "OS í™•ì¸: "
if [ -f /etc/os-release ]; then
    . /etc/os-release
    echo "$NAME $VERSION"
else
    echo "âŒ ì§€ì›í•˜ì§€ ì•ŠëŠ” OS"
    exit 1
fi

# CPU í™•ì¸
echo -n "CPU ì½”ì–´: "
CORES=$(nproc)
echo "$CORES cores"
if [ $CORES -lt 8 ]; then
    echo "âš ï¸  ê²½ê³ : ìµœì†Œ 10ì½”ì–´ ê¶Œì¥"
fi

# RAM í™•ì¸
echo -n "ë©”ëª¨ë¦¬: "
RAM_GB=$(free -g | awk '/^Mem:/{print $2}')
echo "${RAM_GB}GB"
if [ $RAM_GB -lt 32 ]; then
    echo "âŒ ì˜¤ë¥˜: ìµœì†Œ 32GB í•„ìš”"
    exit 1
fi

# GPU í™•ì¸
echo -n "GPU í™•ì¸: "
if command -v nvidia-smi &> /dev/null; then
    GPU_NAME=$(nvidia-smi --query-gpu=name --format=csv,noheader | head -1)
    echo "$GPU_NAME"

    GPU_MEM=$(nvidia-smi --query-gpu=memory.total --format=csv,noheader,nounits | head -1)
    echo "  VRAM: ${GPU_MEM}MB"

    if [ $GPU_MEM -lt 8000 ]; then
        echo "âš ï¸  ê²½ê³ : ìµœì†Œ 8GB VRAM ê¶Œì¥"
    fi
else
    echo "âŒ GPU ì—†ìŒ (CPU ëª¨ë“œ - ëŠë¦¼)"
fi

# Docker í™•ì¸
echo -n "Docker: "
if command -v docker &> /dev/null; then
    DOCKER_VER=$(docker --version | awk '{print $3}' | tr -d ',')
    echo "$DOCKER_VER"
else
    echo "âŒ Docker ë¯¸ì„¤ì¹˜"
    exit 1
fi

# Docker Compose í™•ì¸
echo -n "Docker Compose: "
if command -v docker-compose &> /dev/null; then
    COMPOSE_VER=$(docker-compose --version | awk '{print $4}' | tr -d ',')
    echo "$COMPOSE_VER"
else
    echo "âŒ Docker Compose ë¯¸ì„¤ì¹˜"
    exit 1
fi

# ë””ìŠ¤í¬ ê³µê°„
echo -n "ë””ìŠ¤í¬ ê³µê°„: "
DISK_AVAIL=$(df -BG / | awk 'NR==2 {print $4}' | tr -d 'G')
echo "${DISK_AVAIL}GB ì‚¬ìš© ê°€ëŠ¥"
if [ $DISK_AVAIL -lt 100 ]; then
    echo "âŒ ì˜¤ë¥˜: ìµœì†Œ 100GB í•„ìš”"
    exit 1
fi

echo "==================================="
echo "âœ… ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±!"
echo "==================================="
```

### 8.2 ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# scripts/install.sh

set -e  # ì—ëŸ¬ ì‹œ ì¤‘ë‹¨

echo "===================================="
echo "AX ë„ë©´ ë¶„ì„ ì‹œìŠ¤í…œ ì„¤ì¹˜ ì‹œì‘"
echo "===================================="

# 1. ì‚¬ì „ ì ê²€
echo "[1/7] ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ ì ê²€..."
./scripts/check_system.sh || exit 1

# 2. ì„¤ì¹˜ ë””ë ‰í† ë¦¬ ìƒì„±
echo "[2/7] ì„¤ì¹˜ ë””ë ‰í† ë¦¬ ìƒì„±..."
INSTALL_DIR="/opt/ax-system"
sudo mkdir -p "$INSTALL_DIR"
sudo chown $USER:$USER "$INSTALL_DIR"

# 3. Docker ì´ë¯¸ì§€ ë¡œë“œ
echo "[3/7] Docker ì´ë¯¸ì§€ ë¡œë”© ì¤‘... (ì•½ 5ë¶„ ì†Œìš”)"
for img in docker-images/*.tar; do
    echo "  Loading $(basename $img)..."
    docker load < "$img"
done

# 4. ì„¤ì • íŒŒì¼ ë³µì‚¬
echo "[4/7] ì„¤ì • íŒŒì¼ ë³µì‚¬..."
cp -r config/* "$INSTALL_DIR/"
cp docker-compose.yml "$INSTALL_DIR/"

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
if [ ! -f "$INSTALL_DIR/.env" ]; then
    cp config/.env.template "$INSTALL_DIR/.env"
    echo "âš ï¸  .env íŒŒì¼ì„ ìˆ˜ì •í•˜ì„¸ìš”: $INSTALL_DIR/.env"
fi

# 5. ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±
echo "[5/7] ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±..."
mkdir -p "$INSTALL_DIR/data"/{models,uploads,logs,backups}
mkdir -p "$INSTALL_DIR/prometheus-data"
mkdir -p "$INSTALL_DIR/grafana-data"

# 6. ëª¨ë¸ ê°€ì¤‘ì¹˜ ë³µì‚¬
echo "[6/7] ëª¨ë¸ ê°€ì¤‘ì¹˜ ë³µì‚¬..."
cp -r model-weights/* "$INSTALL_DIR/data/models/"

# 7. ì‹œìŠ¤í…œ ì‹œì‘
echo "[7/7] ì‹œìŠ¤í…œ ì‹œì‘..."
cd "$INSTALL_DIR"
docker-compose up -d

# í—¬ìŠ¤ ì²´í¬ ëŒ€ê¸°
echo "ì‹œìŠ¤í…œ ì‹œì‘ ëŒ€ê¸° ì¤‘... (30ì´ˆ)"
sleep 30

# í—¬ìŠ¤ ì²´í¬
echo "í—¬ìŠ¤ ì²´í¬ ì‹¤í–‰..."
./scripts/health_check.sh

echo "===================================="
echo "âœ… ì„¤ì¹˜ ì™„ë£Œ!"
echo "===================================="
echo ""
echo "ğŸ“Œ ì ‘ì† ì •ë³´:"
echo "  Web UI: http://localhost:5173"
echo "  Admin ëŒ€ì‹œë³´ë“œ: http://localhost:5173/admin"
echo "  Grafana: http://localhost:3000 (admin/admin)"
echo "  API ë¬¸ì„œ: http://localhost:8000/docs"
echo ""
echo "ğŸ“– ë‹¤ìŒ ë‹¨ê³„:"
echo "  1. .env íŒŒì¼ ìˆ˜ì •: $INSTALL_DIR/.env"
echo "  2. Grafana ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"
echo "  3. ê´€ë¦¬ì ë§¤ë‰´ì–¼ ì°¸ì¡°: docs/02_ê´€ë¦¬ìë§¤ë‰´ì–¼.pdf"
echo ""
```

### 8.3 í—¬ìŠ¤ ì²´í¬

```bash
#!/bin/bash
# scripts/health_check.sh

SERVICES=(
    "http://localhost:8000/api/v1/health"
    "http://localhost:5001/api/v1/health"
    "http://localhost:5005/api/v1/health"
    "http://localhost:5012/api/v1/health"
    "http://localhost:5003/api/v1/health"
    "http://localhost:9000/api/status"
)

echo "==================================="
echo "í—¬ìŠ¤ ì²´í¬"
echo "==================================="

ALL_HEALTHY=true

for URL in "${SERVICES[@]}"; do
    SERVICE=$(echo $URL | awk -F'//' '{print $2}' | awk -F'/' '{print $1}')

    if curl -sf "$URL" > /dev/null; then
        echo "âœ… $SERVICE: OK"
    else
        echo "âŒ $SERVICE: FAIL"
        ALL_HEALTHY=false
    fi
done

echo "==================================="
if [ "$ALL_HEALTHY" = true ]; then
    echo "âœ… ëª¨ë“  ì„œë¹„ìŠ¤ ì •ìƒ"
    exit 0
else
    echo "âŒ ì¼ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜"
    exit 1
fi
```

---

## 9. ê³ ê°ì‚¬ êµìœ¡ ê³„íš

### 9.1 êµìœ¡ ê³¼ì • (2ì¼)

#### Day 1: ìš´ì˜ì êµìœ¡

**ì‹œê°„í‘œ**:
```
09:00 - 09:30  ì˜¤ë¦¬ì—”í…Œì´ì…˜ ë° ì‹œìŠ¤í…œ ì†Œê°œ
09:30 - 10:30  ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì´í•´
10:30 - 10:45  íœ´ì‹
10:45 - 12:00  Admin Dashboard ì‚¬ìš©ë²•

12:00 - 13:00  ì ì‹¬

13:00 - 14:00  Grafana ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
14:00 - 15:00  Docker ê´€ë¦¬ (ì‹œì‘/ì¤‘ì§€/ì¬ì‹œì‘)
15:00 - 15:15  íœ´ì‹
15:15 - 16:30  ë¡œê·¸ ë¶„ì„ ë° ê¸°ë³¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
16:30 - 17:00  Q&A ë° ì‹¤ìŠµ
```

**ì‹¤ìŠµ ë‚´ìš©**:
1. ë„ë©´ ì—…ë¡œë“œ ë° ì²˜ë¦¬
2. Admin Dashboardì—ì„œ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
3. Grafanaì—ì„œ ë©”íŠ¸ë¦­ ì¡°íšŒ
4. Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
5. ë¡œê·¸ íŒŒì¼ í™•ì¸

#### Day 2: ê´€ë¦¬ì êµìœ¡

**ì‹œê°„í‘œ**:
```
09:00 - 10:00  ëª¨ë¸ ì¬í•™ìŠµ ë°©ë²•
10:00 - 11:00  ë°±ì—…/ë³µêµ¬ ì‹¤ìŠµ
11:00 - 12:00  ì„±ëŠ¥ íŠœë‹ ë° ìµœì í™”

12:00 - 13:00  ì ì‹¬

13:00 - 14:00  ë³´ì•ˆ ì„¤ì • ë° ê¶Œí•œ ê´€ë¦¬
14:00 - 15:00  ì‹œìŠ¤í…œ ì—…ê·¸ë ˆì´ë“œ ë°©ë²•
15:00 - 15:15  íœ´ì‹
15:15 - 16:30  ì¥ì•  ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤ìŠµ
16:30 - 17:00  ì¢…í•© Q&A ë° ìˆ˜ë£Œì¦ ë°œê¸‰
```

**ì‹¤ìŠµ ë‚´ìš©**:
1. EDGNet ëª¨ë¸ ì¬í•™ìŠµ
2. ì „ì²´ ì‹œìŠ¤í…œ ë°±ì—… ìƒì„±
3. ë°±ì—…ì—ì„œ ë³µêµ¬
4. API í‚¤ ì¶”ê°€/ì‚­ì œ
5. ëª¨ì˜ ì¥ì•  ëŒ€ì‘

### 9.2 êµìœ¡ ìë£Œ

```
training/
â”œâ”€â”€ slides/
â”‚   â”œâ”€â”€ Day1_ì‹œìŠ¤í…œì†Œê°œ.pptx
â”‚   â”œâ”€â”€ Day1_ìš´ì˜ìêµìœ¡.pptx
â”‚   â”œâ”€â”€ Day2_ê´€ë¦¬ìêµìœ¡.pptx
â”‚   â””â”€â”€ Day2_ì¥ì• ëŒ€ì‘.pptx
â”‚
â”œâ”€â”€ hands-on/
â”‚   â”œâ”€â”€ 01_ì²«ë„ë©´ì²˜ë¦¬.md
â”‚   â”œâ”€â”€ 02_ëª¨ë‹ˆí„°ë§.md
â”‚   â”œâ”€â”€ 03_ë°±ì—…ë³µêµ¬.md
â”‚   â””â”€â”€ 04_ì¥ì• ì‹œë‚˜ë¦¬ì˜¤.md
â”‚
â””â”€â”€ cheat-sheets/
    â”œâ”€â”€ docker-commands.pdf
    â”œâ”€â”€ grafana-queries.pdf
    â””â”€â”€ troubleshooting-guide.pdf
```

---

## 10. ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

### 10.1 ë°±ì—…

#### ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# scripts/backup.sh

BACKUP_DIR="/opt/ax-system/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_NAME="ax-system-backup-$TIMESTAMP"
BACKUP_PATH="$BACKUP_DIR/$BACKUP_NAME"

mkdir -p "$BACKUP_PATH"

echo "ë°±ì—… ì‹œì‘: $BACKUP_NAME"

# 1. Docker ë³¼ë¥¨ ë°±ì—…
docker run --rm \
  -v ax-system_models:/data \
  -v "$BACKUP_PATH":/backup \
  alpine tar czf /backup/models.tar.gz -C /data .

# 2. ì„¤ì • íŒŒì¼ ë°±ì—…
tar czf "$BACKUP_PATH/config.tar.gz" /opt/ax-system/config

# 3. Prometheus ë°ì´í„° ë°±ì—…
tar czf "$BACKUP_PATH/prometheus.tar.gz" /opt/ax-system/prometheus-data

# 4. Grafana ë°ì´í„° ë°±ì—…
tar czf "$BACKUP_PATH/grafana.tar.gz" /opt/ax-system/grafana-data

# 5. ê°ì‚¬ ë¡œê·¸ ë°±ì—…
tar czf "$BACKUP_PATH/audit-logs.tar.gz" /opt/ax-system/logs

# 6. ë©”íƒ€ë°ì´í„°
echo "$TIMESTAMP" > "$BACKUP_PATH/metadata.txt"
echo "Hostname: $(hostname)" >> "$BACKUP_PATH/metadata.txt"
docker-compose config > "$BACKUP_PATH/docker-compose.yml"

echo "âœ… ë°±ì—… ì™„ë£Œ: $BACKUP_PATH"

# ì˜¤ë˜ëœ ë°±ì—… ì‚­ì œ (30ì¼ ì´ìƒ)
find "$BACKUP_DIR" -type d -name "ax-system-backup-*" -mtime +30 -exec rm -rf {} \;
```

#### Cron ì„¤ì • (ë§¤ì¼ ìë™ ë°±ì—…)

```bash
# crontab -e
0 2 * * * /opt/ax-system/scripts/backup.sh >> /opt/ax-system/logs/backup.log 2>&1
```

### 10.2 ë³µêµ¬

```bash
#!/bin/bash
# scripts/restore.sh

if [ -z "$1" ]; then
    echo "ì‚¬ìš©ë²•: $0 <ë°±ì—…ë””ë ‰í† ë¦¬>"
    echo "ì˜ˆì‹œ: $0 /opt/ax-system/backups/ax-system-backup-20251114_020000"
    exit 1
fi

BACKUP_PATH="$1"

echo "ë³µêµ¬ ì‹œì‘: $BACKUP_PATH"

# ì‹œìŠ¤í…œ ì¤‘ì§€
cd /opt/ax-system
docker-compose down

# ë³µêµ¬
tar xzf "$BACKUP_PATH/models.tar.gz" -C /opt/ax-system/data/models
tar xzf "$BACKUP_PATH/config.tar.gz" -C /
tar xzf "$BACKUP_PATH/prometheus.tar.gz" -C /opt/ax-system
tar xzf "$BACKUP_PATH/grafana.tar.gz" -C /opt/ax-system

# ì‹œìŠ¤í…œ ì‹œì‘
docker-compose up -d

echo "âœ… ë³µêµ¬ ì™„ë£Œ"
```

### 10.3 ì—…ë°ì´íŠ¸

```bash
#!/bin/bash
# scripts/update.sh

NEW_VERSION="$1"

if [ -z "$NEW_VERSION" ]; then
    echo "ì‚¬ìš©ë²•: $0 <ë²„ì „>"
    echo "ì˜ˆì‹œ: $0 1.1.0"
    exit 1
fi

echo "ì—…ë°ì´íŠ¸ ì‹œì‘: v$NEW_VERSION"

# 1. ë°±ì—…
./scripts/backup.sh

# 2. ìƒˆ ì´ë¯¸ì§€ ë¡œë“œ
docker load < updates/v$NEW_VERSION/*.tar

# 3. Docker Compose ì—…ë°ì´íŠ¸
cp updates/v$NEW_VERSION/docker-compose.yml /opt/ax-system/

# 4. ì¬ì‹œì‘
cd /opt/ax-system
docker-compose up -d

echo "âœ… ì—…ë°ì´íŠ¸ ì™„ë£Œ"
```

---

## ë¶€ë¡

### A. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

| ì¦ìƒ | ì›ì¸ | í•´ê²° ë°©ë²• |
|------|------|----------|
| GPU out of memory | VRAM ë¶€ì¡± | batch_size ì¤„ì´ê¸°, ë¶ˆí•„ìš”í•œ ëª¨ë¸ ì¢…ë£Œ |
| API ì‘ë‹µ ëŠë¦¼ | ë†’ì€ ë¶€í•˜ | ë¦¬ì†ŒìŠ¤ ì¦ì„¤, íŒŒì´í”„ë¼ì¸ ëª¨ë“œ ë³€ê²½ |
| Docker ì‹œì‘ ì‹¤íŒ¨ | í¬íŠ¸ ì¶©ëŒ | netstat -tulpnìœ¼ë¡œ í™•ì¸, í¬íŠ¸ ë³€ê²½ |

### B. ì„±ëŠ¥ íŠœë‹

```yaml
# docker-compose.yml
services:
  gateway-api:
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 8G
```

### C. ë¼ì´ì„ ìŠ¤

```
ìƒì—…ì  ë¼ì´ì„ ìŠ¤
ì˜¨í”„ë ˆë¯¸ìŠ¤ ë‹¨ì¼ ì„œë²„ ë¼ì´ì„ ìŠ¤
```

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ìµœì¢… ìˆ˜ì •**: 2025-11-14
**ì‘ì„±ì**: AX ê°œë°œíŒ€
