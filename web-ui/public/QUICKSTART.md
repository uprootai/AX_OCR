# λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“

AX μ‹¤μ¦μ‚°λ‹¨ λ§μ΄ν¬λ΅μ„λΉ„μ¤ API μ‹μ¤ν… - 5λ¶„ μ•μ— μ‹μ‘ν•κΈ°

## π“‹ μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- Docker 20.10+ μ„¤μΉ
- Docker Compose 2.0+ μ„¤μΉ
- μµμ† 8GB RAM
- μƒν” λ„λ©΄ νμΌ (μ„ νƒμ‚¬ν•­)

## π€ 1λ‹¨κ³„: μ „μ²΄ μ‹μ¤ν… μ‹¤ν–‰

POC λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν• ν›„, Docker Composeλ¥Ό μ‚¬μ©ν•μ—¬ μ „μ²΄ μ‹μ¤ν…μ„ λΉλ“ν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤.

**μµμ΄ μ‹¤ν–‰ μ‹**: λ¨λ“  μ„λΉ„μ¤μ μ΄λ―Έμ§€λ¥Ό λΉλ“ν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤. μ‹μ¤ν… μ‚¬μ–‘μ— λ”°λΌ μ•½ 5-10λ¶„μ΄ μ†μ”λ©λ‹λ‹¤. `--build` μµμ…μ€ Docker μ΄λ―Έμ§€λ¥Ό μƒλ΅ λΉλ“ν•λΌλ” μλ―Έμ…λ‹λ‹¤.

**μ΄λ―Έ λΉλ“λ κ²½μ°**: λΉλ“ μµμ… μ—†μ΄ λ°”λ΅ μ‹¤ν–‰ν•λ©΄ κΈ°μ΅΄ μ΄λ―Έμ§€λ¥Ό μ‚¬μ©ν•μ—¬ λΉ λ¥΄κ² μ‹μ‘λ©λ‹λ‹¤.

## β±οΈ 2λ‹¨κ³„: μ„λΉ„μ¤ μ¤€λΉ„ λ€κΈ°

μ‹¤μ‹κ°„ λ΅κ·Έλ¥Ό ν™•μΈν•μ—¬ λ¨λ“  μ„λΉ„μ¤κ°€ μ •μƒμ μΌλ΅ μ‹μ‘λ  λ•κΉμ§€ κΈ°λ‹¤λ¦½λ‹λ‹¤. κ° μ„λΉ„μ¤μ—μ„ "Application startup complete" λ©”μ‹μ§€κ°€ ν‘μ‹λλ©΄ μ¤€λΉ„κ°€ μ™„λ£λ κ²ƒμ…λ‹λ‹¤. λ΅κ·Έ ν™•μΈμ„ μ¤‘μ§€ν•λ ¤λ©΄ Ctrl+Cλ¥Ό λ„λ¦…λ‹λ‹¤.

**μμƒ λ€κΈ° μ‹κ°„**: λ¨λ“  μ„λΉ„μ¤κ°€ μ™„μ „ν μ¤€λΉ„λκΈ°κΉμ§€ μ•½ 1-2λ¶„μ΄ μ†μ”λ©λ‹λ‹¤.

## β… 3λ‹¨κ³„: ν—¬μ¤μ²΄ν¬

μ›Ή λΈλΌμ°μ €λ‚ `curl` λ…λ Ήμ–΄λ΅ Gateway APIμ ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈμ— μ ‘μ†ν•μ—¬ μ „μ²΄ μ‹μ¤ν…μ μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤.

**μ •μƒ μ‘λ‹µ μμ‹**:
μ‹μ¤ν…μ΄ μ •μƒ μ‘λ™ μ¤‘μΌ λ•λ” JSON ν•μ‹μ μ‘λ‹µμ— λ‹¤μ μ •λ³΄κ°€ ν¬ν•¨λ©λ‹λ‹¤:
- `status`: "healthy" (λ¨λ“  μ„λΉ„μ¤ μ •μƒ) λλ” "degraded" (μΌλ¶€ μ„λΉ„μ¤ λ¬Έμ )
- `service`: μ„λΉ„μ¤ μ΄λ¦„ ("Gateway API")
- `version`: μ‹μ¤ν… λ²„μ „ μ •λ³΄
- `timestamp`: μ‘λ‹µ μ‹κ°
- `services`: κ° ν•μ„ μ„λΉ„μ¤(edocr2, edgnet, skinmodel, paddleocr)μ μƒνƒ

**μ°Έκ³ **:
- `status`κ°€ "healthy"μΌ λ• λ¨λ“  μ„λΉ„μ¤κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•κ³  μμµλ‹λ‹¤
- `status`κ°€ "degraded"μΌ λ• μΌλ¶€ μ„λΉ„μ¤μ— λ¬Έμ κ°€ μμΌλ―€λ΅ `services` κ°μ²΄μ—μ„ λ¬Έμ κ°€ μλ” μ„λΉ„μ¤λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤

## π§ 4λ‹¨κ³„: μλ™ ν…μ¤νΈ μ‹¤ν–‰

### λ°©λ²• 1: Bash μ¤ν¬λ¦½νΈ (κ¶μ¥)

μ κ³µλλ” Bash ν…μ¤νΈ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•μ—¬ λ¨λ“  APIμ λ™μ‘μ„ μλ™μΌλ΅ κ²€μ¦ν•©λ‹λ‹¤.

### λ°©λ²• 2: Python μ¤ν¬λ¦½νΈ

PythonμΌλ΅ μ‘μ„±λ ν…μ¤νΈ μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•  μλ„ μμµλ‹λ‹¤.

**μμƒ κ²°κ³Ό**:
ν…μ¤νΈκ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄ λ‹¤μκ³Ό κ°™μ€ μ¶λ ¥μ΄ ν‘μ‹λ©λ‹λ‹¤:
- ν—¬μ¤μ²΄ν¬ ν…μ¤νΈ κ²°κ³Ό (κ° APIλ³„ HTTP 200 μ‘λ‹µ ν™•μΈ)
- κ° ν…μ¤νΈ ν•­λ©λ³„λ΅ β“ PASS ν‘μ‹
- μµμΆ…μ μΌλ΅ "λ¨λ“  ν…μ¤νΈ ν†µκ³Ό!" λ©”μ‹μ§€ ν‘μ‹

## π“ 5λ‹¨κ³„: API λ¬Έμ„ ν™•μΈ

μ›Ή λΈλΌμ°μ €μ—μ„ κ° APIμ Swagger UI λ¬Έμ„ νμ΄μ§€μ— μ ‘μ†ν•μ—¬ λ€ν™”ν•μΌλ΅ APIλ¥Ό ν…μ¤νΈν•κ³  λ…μ„Έλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:

- **Gateway API (ν†µν•©)**: `http://localhost:8000/docs` - μ „μ²΄ νμ΄ν”„λΌμΈ ν†µν•© μ—”λ“ν¬μΈνΈ
- **eDOCr2 API (OCR)**: `http://localhost:5001/docs` - λ„λ©΄ ν…μ¤νΈ μΈμ‹
- **EDGNet API (μ„Έκ·Έλ©ν…μ΄μ…)**: `http://localhost:5012/docs` - λ„λ©΄ μμ—­ λ¶„ν• 
- **Skin Model API (κ³µμ°¨ μμΈ΅)**: `http://localhost:5003/docs` - κ³µμ°¨ λ¶„μ„ λ° μμΈ΅

## π¨ 6λ‹¨κ³„: μ‹¤μ  λ„λ©΄ μ²λ¦¬

### μƒν” λ„λ©΄ μ¤€λΉ„

ν…μ¤νΈμ— μ‚¬μ©ν•  μƒν” λ„λ©΄ νμΌμ κ²½λ΅λ¥Ό ν™κ²½ λ³€μλ΅ μ§€μ •ν•©λ‹λ‹¤. μ΄ μμ‹μ—μ„λ” ν”„λ΅μ νΈ reference λ””λ ‰ν† λ¦¬μ— μλ” μƒν” λ„λ©΄μ„ μ‚¬μ©ν•©λ‹λ‹¤.

### μ „μ²΄ νμ΄ν”„λΌμΈ μ‹¤ν–‰

Gateway APIμ `/api/v1/process` μ—”λ“ν¬μΈνΈμ— λ„λ©΄ νμΌμ„ μ—…λ΅λ“ν•μ—¬ μ „μ²΄ λ¶„μ„ νμ΄ν”„λΌμΈμ„ μ‹¤ν–‰ν•©λ‹λ‹¤. λ‹¤μ μµμ…λ“¤μ„ ν™μ„±ν™”ν•  μ μμµλ‹λ‹¤:
- `use_segmentation=true`: λ„λ©΄ μμ—­ λ¶„ν•  μν–‰
- `use_ocr=true`: OCR ν…μ¤νΈ μ¶”μ¶ μν–‰
- `use_tolerance=true`: κ³µμ°¨ μμΈ΅ μν–‰
- `visualize=true`: μ‹κ°ν™” κ²°κ³Ό ν¬ν•¨

κ²°κ³Όλ” JSON ν•μ‹μΌλ΅ `result.json` νμΌμ— μ €μ¥λ©λ‹λ‹¤. `python3 -m json.tool` λ…λ Ήμ–΄λ΅ JSON ν•μ‹μ„ λ³΄κΈ° μΆ‹κ² μ •λ¦¬ν•μ—¬ ν™•μΈν•  μ μμµλ‹λ‹¤.

### κ²¬μ μ„ μƒμ„±

Gateway APIμ `/api/v1/quote` μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ„λ©΄ λ¶„μ„ κ²°κ³Όλ¥Ό κΈ°λ°μΌλ΅ μ μ΅° κ²¬μ μ„ μλ™ μƒμ„±ν•©λ‹λ‹¤. μ¬λ£ λΉ„μ©(`material_cost_per_kg`)κ³Ό κ°€κ³µ μ‹κ°„λ‹Ή λΉ„μ©(`machining_rate_per_hour`)μ„ μ…λ ¥ν•λ©΄ μƒμ„Έν• κ²¬μ μ΄ κ³„μ‚°λ©λ‹λ‹¤.

κ²°κ³Όλ” `quote.json` νμΌμ— μ €μ¥λλ©°, λ™μΌν•κ² JSON ν¬λ§·ν„°λ΅ ν™•μΈν•  μ μμµλ‹λ‹¤.

## π› οΈ λ¬Έμ  ν•΄κ²°

### μ„λΉ„μ¤κ°€ μ‹μ‘λμ§€ μ•μ„ λ•

**λ¨λ“  μ»¨ν…μ΄λ„ μ¤‘μ§€**: ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ¨λ“  μ»¨ν…μ΄λ„λ¥Ό μ¤‘μ§€ν•κ³  μ κ±°ν•©λ‹λ‹¤.

**λ³Όλ¥¨κΉμ§€ μ‚­μ  (μ™„μ „ μ΄κΈ°ν™”)**: `-v` μµμ…μ„ μ¶”κ°€ν•λ©΄ λ°μ΄ν„° λ³Όλ¥¨κΉμ§€ μ‚­μ ν•μ—¬ μ™„μ „ν μ΄κΈ°ν™”λ©λ‹λ‹¤.

**λ‹¤μ‹ μ‹μ‘**: μ „μ²΄ μ‹μ¤ν…μ„ λΉλ“ν•κ³  μ¬μ‹μ‘ν•©λ‹λ‹¤.

### νΉμ • μ„λΉ„μ¤ μ¤λ¥ ν™•μΈ

κ°λ³„ μ„λΉ„μ¤μ λ΅κ·Έλ¥Ό ν™•μΈν•μ—¬ λ¬Έμ λ¥Ό μ§„λ‹¨ν•©λ‹λ‹¤. `docker logs <μ„λΉ„μ¤λ…>` λ…λ Ήμ–΄λ΅ κ° μ„λΉ„μ¤λ³„ λ΅κ·Έλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

### ν¬νΈ μ¶©λ

νΉμ • ν¬νΈλ¥Ό μ‚¬μ©ν•λ” ν”„λ΅μ„Έμ¤λ¥Ό ν™•μΈν•λ ¤λ©΄ `lsof` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. ν”„λ΅μ„Έμ¤ ID(PID)κ°€ ν™•μΈλλ©΄ `kill -9 <PID>` λ…λ Ήμ–΄λ΅ ν•΄λ‹Ή ν”„λ΅μ„Έμ¤λ¥Ό κ°•μ  μΆ…λ£ν•  μ μμµλ‹λ‹¤.

## π“ μ‹μ¤ν… μƒνƒ λ¨λ‹ν„°λ§

### μ‹¤μ‹κ°„ λ΅κ·Έ ν™•μΈ

μ „μ²΄ μ‹μ¤ν… λλ” νΉμ • μ„λΉ„μ¤μ λ΅κ·Έλ¥Ό μ‹¤μ‹κ°„μΌλ΅ ν™•μΈν•  μ μμµλ‹λ‹¤. `-f` μµμ…μ€ follow λ¨λ“λ΅, μƒλ΅μ΄ λ΅κ·Έκ°€ μƒμ„±λ  λ•λ§λ‹¤ μλ™μΌλ΅ ν‘μ‹λ©λ‹λ‹¤.

### λ¦¬μ†μ¤ μ‚¬μ©λ‰

`docker stats` λ…λ Ήμ–΄λ΅ κ° μ»¨ν…μ΄λ„μ CPU, λ©”λ¨λ¦¬, λ„¤νΈμ›ν¬ μ‚¬μ©λ‰μ„ μ‹¤μ‹κ°„μΌλ΅ λ¨λ‹ν„°λ§ν•  μ μμµλ‹λ‹¤.

### μ»¨ν…μ΄λ„ μƒνƒ

ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ¨λ“  μ»¨ν…μ΄λ„μ μ΄λ¦„, μƒνƒ, ν¬νΈ λ§¤ν•‘ μ •λ³΄λ¥Ό ν™•μΈν•©λ‹λ‹¤.

## π›‘ μ‹μ¤ν… μ¤‘μ§€

**μ»¨ν…μ΄λ„ μ¤‘μ§€ (λ°μ΄ν„° λ³΄μ΅΄)**: μ»¨ν…μ΄λ„λ¥Ό μ¤‘μ§€ν•μ§€λ§ λ°μ΄ν„°λ” λ³΄μ΅΄λ©λ‹λ‹¤. λΉ λ¥Έ μ¬μ‹μ‘μ΄ κ°€λ¥ν•©λ‹λ‹¤.

**μ»¨ν…μ΄λ„ μ‚­μ  (λ°μ΄ν„° λ³΄μ΅΄)**: μ»¨ν…μ΄λ„λ¥Ό μ‚­μ ν•μ§€λ§ λ³Όλ¥¨μ— μ €μ¥λ λ°μ΄ν„°λ” μ μ§€λ©λ‹λ‹¤.

**μ™„μ „ μ‚­μ  (λ³Όλ¥¨κΉμ§€)**: `-v` μµμ…μ„ μ‚¬μ©ν•λ©΄ λ³Όλ¥¨κΉμ§€ μ‚­μ ν•μ—¬ μ™„μ „ν μ΄κΈ°ν™”λ©λ‹λ‹¤. μ£Όμ: λ¨λ“  λ°μ΄ν„°κ°€ μ‚­μ λ©λ‹λ‹¤.

## π”„ μ‹μ¤ν… μ¬μ‹μ‘

**μ¤‘μ§€ ν›„ μ¬μ‹μ‘**: λ¨λ“  μ»¨ν…μ΄λ„λ¥Ό μ¬μ‹μ‘ν•©λ‹λ‹¤.

**νΉμ • μ„λΉ„μ¤λ§ μ¬μ‹μ‘**: κ°λ³„ μ„λΉ„μ¤λ§ μ„ νƒμ μΌλ΅ μ¬μ‹μ‘ν•  μ μμµλ‹λ‹¤.

## π“ λ‹¤μ λ‹¨κ³„

1. **API λ¬Έμ„ νƒμƒ‰**: Swagger UI(`http://localhost:8000/docs`)μ—μ„ κ° μ—”λ“ν¬μΈνΈμ μƒμ„Έ μ •λ³΄λ¥Ό ν™•μΈν•κ³  ν…μ¤νΈν•©λ‹λ‹¤.
2. **κ°λ³„ README μ½κΈ°**: κ° μ„λΉ„μ¤ λ””λ ‰ν† λ¦¬μ README νμΌμ—μ„ μƒμ„Έν• μ‚¬μ©λ²•κ³Ό μμ λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
3. **Python/JavaScript ν΄λΌμ΄μ–ΈνΈ μ‘μ„±**: κ° READMEμ μμ  μ½”λ“λ¥Ό μ°Έκ³ ν•μ—¬ μμ‹ μ μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό ν†µν•©ν•©λ‹λ‹¤.
4. **μ‹¤μ  λ„λ©΄μΌλ΅ ν…μ¤νΈ**: μμ²΄ λ³΄μ ν• λ„λ©΄ νμΌμ„ μ—…λ΅λ“ν•μ—¬ μ‹μ¤ν…μ μ •ν™•λ„λ¥Ό ν‰κ°€ν•©λ‹λ‹¤.

## β΅ λΉ λ¥Έ λ…λ Ήμ–΄ λ¨μ

μμ£Ό μ‚¬μ©ν•λ” λ…λ Ήμ–΄λ“¤μ„ λ¨μ•„λ†“μ•μµλ‹λ‹¤:

- **μ‹μ¤ν… μ‹μ‘**: POC λ””λ ‰ν† λ¦¬μ—μ„ `docker-compose up -d` μ‹¤ν–‰
- **μƒνƒ ν™•μΈ**: μ›Ή λΈλΌμ°μ €λ‚ curlλ΅ `http://localhost:8000/api/v1/health` μ ‘μ†
- **ν…μ¤νΈ**: `./test_apis.sh` μ¤ν¬λ¦½νΈ μ‹¤ν–‰
- **λ΅κ·Έ ν™•μΈ**: `docker-compose logs -f` μ‹¤ν–‰
- **μ¤‘μ§€**: `docker-compose stop` μ‹¤ν–‰
- **μ¬μ‹μ‘**: `docker-compose restart` μ‹¤ν–‰

## π’΅ ν

1. **μ²μ λΉλ“λ” μ‹κ°„μ΄ κ±Έλ¦½λ‹λ‹¤**: μµμ΄ λΉλ“ μ‹ 5-10λ¶„ μ†μ”λ  μ μμµλ‹λ‹¤. μ΄ν›„μ—λ” λΉλ“ μΊμ‹λ¥Ό μ‚¬μ©ν•λ―€λ΅ λΉ λ¥΄κ² μ‹μ‘λ©λ‹λ‹¤.
2. **λ¨λ“  μ„λΉ„μ¤κ°€ healthy μƒνƒ**κ°€ λ  λ•κΉμ§€ κΈ°λ‹¤λ¦¬μ„Έμ”. μΌλ¶€ μ„λΉ„μ¤λ” μ΄κΈ°ν™”μ— μ‹κ°„μ΄ κ±Έλ¦΄ μ μμµλ‹λ‹¤.
3. **μƒν” λ„λ©΄μΌλ΅ λ¨Όμ € ν…μ¤νΈ**ν•΄λ³΄μ„Έμ”. μ‹μ¤ν…μ λ™μ‘ λ°©μ‹μ„ μ΄ν•΄ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.
4. **Swagger UI**μ—μ„ λ€ν™”ν•μΌλ΅ API ν…μ¤νΈκ°€ κ°€λ¥ν•©λ‹λ‹¤. νμΌ μ—…λ΅λ“μ™€ νλΌλ―Έν„° μ΅°μ •μ„ μ›Ή μΈν„°νμ΄μ¤μ—μ„ μ§μ ‘ ν•΄λ³Ό μ μμµλ‹λ‹¤.

## π† λ„μ›€μ΄ ν•„μ”ν•μ‹ κ°€μ”?

- **λ¬Έμ„**: κ° μ„λΉ„μ¤ λ””λ ‰ν† λ¦¬μ `README.md` νμΌμ—μ„ μƒμ„Έν• μ •λ³΄λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
- **νΈλ¬λΈ”μν…**: `docs/TROUBLESHOOTING.md` νμΌμ—μ„ μΌλ°μ μΈ λ¬Έμ μ™€ ν•΄κ²° λ°©λ²•μ„ μ°Έμ΅°ν•μ„Έμ”.

---

**μ¤€λΉ„ μ™„λ£!** π‰

μ΄μ  `docker-compose up -d` λ…λ Ήμ–΄ ν•λ‚λ΅ μ „μ²΄ μ‹μ¤ν…μ„ μ‹¤ν–‰ν•κ³ ,
λΈλΌμ°μ €μ—μ„ `http://localhost:8000/docs`λ¥Ό μ—΄μ–΄ APIλ¥Ό νƒμƒ‰ν•  μ μμµλ‹λ‹¤.
