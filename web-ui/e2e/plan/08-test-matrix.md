# 테스트 매트릭스

> **목적**: 전체 테스트 시나리오 추적 및 우선순위 관리
> **총 테스트**: 500+
> **자동화 목표**: 80% (400+)

---

## 목차

1. [우선순위별 테스트 분류](#1-우선순위별-테스트-분류)
2. [카테고리별 상세 매트릭스](#2-카테고리별-상세-매트릭스)
3. [자동화 상태](#3-자동화-상태)
4. [실행 일정](#4-실행-일정)
5. [커버리지 추적](#5-커버리지-추적)

---

## 1. 우선순위별 테스트 분류

### 1.1 P0 (Critical) - 핵심 기능

> **테스트 수**: 80개
> **자동화 목표**: 100%
> **실행 주기**: 모든 PR, 배포 전

| ID | 시나리오 | 문서 | 자동화 | 상태 |
|----|----------|------|--------|------|
| P0-001 | 이미지 업로드 | 01-api | ✅ | 완료 |
| P0-002 | 세션 생성 | 01-api | ✅ | 완료 |
| P0-003 | 세션 조회 | 01-api | ✅ | 완료 |
| P0-004 | 세션 삭제 | 01-api | ✅ | 완료 |
| P0-005 | YOLO 검출 실행 | 01-api | ✅ | 완료 |
| P0-006 | 검출 결과 조회 | 01-api | ✅ | 완료 |
| P0-007 | OCR 실행 | 01-api | ⬜ | 대기 |
| P0-008 | BOM 생성 | 01-api | ⬜ | 대기 |
| P0-009 | BOM 조회 | 01-api | ⬜ | 대기 |
| P0-010 | Excel 내보내기 | 01-api | ✅ | 완료 |
| P0-011 | 단일 항목 검증 | 01-api | ✅ | 완료 |
| P0-012 | 일괄 검증 | 01-api | ✅ | 완료 |
| P0-013 | 헬스 체크 | 01-api | ✅ | 완료 |
| P0-014 | API 에러 응답 400 | 05-edge | ✅ | 완료 |
| P0-015 | API 에러 응답 404 | 05-edge | ✅ | 완료 |
| P0-016 | API 에러 응답 500 | 05-edge | ⬜ | 대기 |
| P0-017 | 세션 상세 페이지 렌더링 | 02-ui | ✅ | 완료 |
| P0-018 | 검출 결과 테이블 표시 | 02-ui | ✅ | 완료 |
| P0-019 | 바운딩 박스 오버레이 | 02-ui | ✅ | 완료 |
| P0-020 | 검출-검증-내보내기 통합 | 06-int | ⬜ | 대기 |

### 1.2 P1 (High) - 중요 기능

> **테스트 수**: 150개
> **자동화 목표**: 90%
> **실행 주기**: Daily, 릴리즈 전

| ID | 시나리오 | 문서 | 자동화 | 상태 |
|----|----------|------|--------|------|
| P1-001 | TECHCROSS 1-1 체크리스트 | 03-tc | ✅ | 완료 |
| P1-002 | TECHCROSS 1-2 밸브 신호 | 03-tc | ✅ | 완료 |
| P1-003 | TECHCROSS 1-3 장비 목록 | 03-tc | ✅ | 완료 |
| P1-004 | TECHCROSS 1-4 편차 분석 | 03-tc | ⬜ | 대기 |
| P1-005 | confidence 파라미터 | 04-hp | ✅ | 완료 |
| P1-006 | iou_threshold 파라미터 | 04-hp | ✅ | 완료 |
| P1-007 | imgsz 파라미터 | 04-hp | ✅ | 완료 |
| P1-008 | model_type 선택 | 04-hp | ⬜ | 대기 |
| P1-009 | rule_profile 선택 | 04-hp | ✅ | 완료 |
| P1-010 | 세션 목록 페이지네이션 | 02-ui | ⬜ | 대기 |
| P1-011 | 검출 결과 필터링 | 02-ui | ⬜ | 대기 |
| P1-012 | 검출 결과 정렬 | 02-ui | ⬜ | 대기 |
| P1-013 | 모달 다이얼로그 동작 | 02-ui | ⬜ | 대기 |
| P1-014 | 파일 형식 검증 | 05-edge | ⬜ | 대기 |
| P1-015 | 파일 크기 제한 | 05-edge | ⬜ | 대기 |
| P1-016 | 네트워크 오류 복구 | 05-edge | ⬜ | 대기 |
| P1-017 | 브라우저 호환성 Chrome | 05-edge | ✅ | 완료 |
| P1-018 | 브라우저 호환성 Firefox | 05-edge | ⬜ | 대기 |
| P1-019 | PID Analyzer 통합 | 06-int | ⬜ | 대기 |
| P1-020 | Design Checker 통합 | 06-int | ⬜ | 대기 |

### 1.3 P2 (Medium) - 부가 기능

> **테스트 수**: 180개
> **자동화 목표**: 70%
> **실행 주기**: Weekly

| ID | 시나리오 | 문서 | 자동화 | 상태 |
|----|----------|------|--------|------|
| P2-001 | VLM 분류 | 04-hp | ⬜ | 대기 |
| P2-002 | GD&T 파싱 | 04-hp | ⬜ | 대기 |
| P2-003 | OCR Ensemble | 06-int | ⬜ | 대기 |
| P2-004 | 리비전 비교 | 06-int | ⬜ | 대기 |
| P2-005 | 대용량 이미지 처리 | 05-edge | ⬜ | 대기 |
| P2-006 | 1000+ 검출 결과 | 05-edge | ⬜ | 대기 |
| P2-007 | 동시 사용자 처리 | 05-edge | ⬜ | 대기 |
| P2-008 | 파라미터 프리셋 | 04-hp | ⬜ | 대기 |
| P2-009 | PDF 내보내기 | 01-api | ⬜ | 대기 |
| P2-010 | JSON 내보내기 | 01-api | ⬜ | 대기 |

### 1.4 P3 (Low) - 개선 사항

> **테스트 수**: 90개
> **자동화 목표**: 50%
> **실행 주기**: Monthly

| ID | 시나리오 | 문서 | 자동화 | 상태 |
|----|----------|------|--------|------|
| P3-001 | 다크 모드 | 02-ui | ⬜ | 대기 |
| P3-002 | 다국어 지원 | 02-ui | ⬜ | 대기 |
| P3-003 | 키보드 단축키 | 02-ui | ⬜ | 대기 |
| P3-004 | 접근성 (a11y) | 02-ui | ⬜ | 대기 |
| P3-005 | 성능 최적화 검증 | 06-int | ⬜ | 대기 |

---

## 2. 카테고리별 상세 매트릭스

### 2.1 API 엔드포인트 (200개)

| 카테고리 | 엔드포인트 수 | 테스트 수 | 자동화 | 커버리지 |
|----------|--------------|----------|--------|----------|
| System | 5 | 10 | 8 | 80% |
| Session | 9 | 25 | 15 | 60% |
| Detection | 8 | 30 | 12 | 40% |
| BOM | 5 | 20 | 8 | 40% |
| Verification | 10 | 35 | 10 | 29% |
| P&ID Features | 16 | 50 | 15 | 30% |
| Export | 4 | 15 | 5 | 33% |
| Analysis | 5 | 15 | 2 | 13% |
| **합계** | **62** | **200** | **75** | **38%** |

### 2.2 UI 인터랙션 (150개)

| 카테고리 | 컴포넌트 수 | 테스트 수 | 자동화 | 커버리지 |
|----------|------------|----------|--------|----------|
| Navigation | 5 | 10 | 5 | 50% |
| Sidebar | 8 | 20 | 10 | 50% |
| Image Canvas | 3 | 25 | 8 | 32% |
| Forms | 10 | 30 | 12 | 40% |
| Tables | 8 | 25 | 8 | 32% |
| Modals | 6 | 15 | 3 | 20% |
| State Management | 8 | 25 | 5 | 20% |
| **합계** | **48** | **150** | **51** | **34%** |

### 2.3 TECHCROSS 워크플로우 (50개)

| 워크플로우 | 시나리오 수 | 자동화 | 커버리지 |
|-----------|------------|--------|----------|
| 1-1 Checklist | 15 | 6 | 40% |
| 1-2 Valve Signal | 12 | 4 | 33% |
| 1-3 Equipment | 12 | 4 | 33% |
| 1-4 Deviation | 11 | 2 | 18% |
| **합계** | **50** | **16** | **32%** |

### 2.4 하이퍼파라미터 (40개)

| 파라미터 그룹 | 테스트 수 | 자동화 | 커버리지 |
|--------------|----------|--------|----------|
| Detection | 17 | 10 | 59% |
| OCR | 6 | 2 | 33% |
| Analysis | 8 | 2 | 25% |
| P&ID | 4 | 2 | 50% |
| Export | 7 | 3 | 43% |
| **합계** | **42** | **19** | **45%** |

### 2.5 엣지 케이스 (30개)

| 카테고리 | 테스트 수 | 자동화 | 커버리지 |
|----------|----------|--------|----------|
| Input Validation | 13 | 4 | 31% |
| API Errors | 8 | 4 | 50% |
| Network | 6 | 1 | 17% |
| Large Data | 6 | 2 | 33% |
| Concurrency | 4 | 0 | 0% |
| Security | 6 | 2 | 33% |
| **합계** | **43** | **13** | **30%** |

### 2.6 통합 테스트 (30개)

| 카테고리 | 테스트 수 | 자동화 | 커버리지 |
|----------|----------|--------|----------|
| Workflow | 6 | 2 | 33% |
| FE-BE Integration | 6 | 3 | 50% |
| External Services | 8 | 2 | 25% |
| Data Consistency | 4 | 1 | 25% |
| State Transitions | 4 | 1 | 25% |
| Performance | 4 | 1 | 25% |
| **합계** | **32** | **10** | **31%** |

---

## 3. 자동화 상태

### 3.1 현재 자동화 현황

```
전체 테스트: 515개
자동화됨: 141개 (27%)
수동: 374개 (73%)

우선순위별:
  P0: 80개 중 45개 자동화 (56%)
  P1: 150개 중 45개 자동화 (30%)
  P2: 180개 중 35개 자동화 (19%)
  P3: 90개 중 16개 자동화 (18%)
```

### 3.2 자동화 로드맵

#### Phase 1 (1-2주): P0 완료
```
목표: P0 80개 → 100% 자동화
추가 필요: 35개
주요 작업:
  - OCR 테스트 자동화 (5개)
  - BOM 생성/조회 자동화 (8개)
  - 에러 처리 자동화 (7개)
  - 통합 워크플로우 (15개)
```

#### Phase 2 (3-4주): P1 80%
```
목표: P1 150개 → 120개 자동화
추가 필요: 75개
주요 작업:
  - TECHCROSS 워크플로우 확대 (30개)
  - 하이퍼파라미터 테스트 (20개)
  - UI 인터랙션 (25개)
```

#### Phase 3 (5-8주): P2 60%
```
목표: P2 180개 → 108개 자동화
추가 필요: 73개
주요 작업:
  - VLM 분류 테스트 (10개)
  - 대용량 처리 (15개)
  - 외부 서비스 통합 (25개)
  - 리비전 비교 (10개)
  - 기타 (13개)
```

### 3.3 자동화 파일 구조

```
e2e/
├── blueprint-ai-bom.spec.ts           # 기본 워크플로우 (20개)
├── blueprint-ai-bom-comprehensive.spec.ts  # 상세 파라미터 (41개)
├── api/
│   ├── sessions.spec.ts               # 세션 API
│   ├── detection.spec.ts              # 검출 API
│   ├── bom.spec.ts                    # BOM API
│   └── export.spec.ts                 # 내보내기 API
├── ui/
│   ├── navigation.spec.ts             # 네비게이션
│   ├── forms.spec.ts                  # 폼 인터랙션
│   ├── tables.spec.ts                 # 테이블 인터랙션
│   └── modals.spec.ts                 # 모달 인터랙션
├── techcross/
│   ├── checklist.spec.ts              # 1-1 체크리스트
│   ├── valve-signal.spec.ts           # 1-2 밸브 신호
│   ├── equipment.spec.ts              # 1-3 장비 목록
│   └── deviation.spec.ts              # 1-4 편차 분석
├── hyperparameters/
│   ├── detection.spec.ts              # 검출 파라미터
│   ├── ocr.spec.ts                    # OCR 파라미터
│   └── export.spec.ts                 # 내보내기 파라미터
├── edge-cases/
│   ├── validation.spec.ts             # 입력 검증
│   ├── errors.spec.ts                 # 에러 처리
│   └── large-data.spec.ts             # 대용량 데이터
├── integration/
│   ├── workflow.spec.ts               # 전체 워크플로우
│   ├── external-services.spec.ts      # 외부 서비스
│   └── performance.spec.ts            # 성능 테스트
├── fixtures/                          # 테스트 데이터
└── plan/                              # 테스트 계획 문서
```

---

## 4. 실행 일정

### 4.1 실행 주기

| 테스트 유형 | 주기 | 트리거 | 예상 시간 |
|------------|------|--------|----------|
| P0 Smoke | 모든 PR | PR 생성 | 5분 |
| P0 Full | Daily | 스케줄 | 15분 |
| P0 + P1 | 릴리즈 전 | 수동 | 45분 |
| 전체 | Weekly | 스케줄 | 2시간 |
| 성능 | Monthly | 스케줄 | 30분 |

### 4.2 CI/CD 통합

```yaml
# .github/workflows/e2e.yml
name: E2E Tests

on:
  pull_request:
    branches: [main, develop]
  schedule:
    - cron: '0 2 * * *'  # Daily at 2am

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run P0 Smoke Tests
        run: npx playwright test --grep "@p0" --grep "@smoke"

  full:
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule'
    steps:
      - uses: actions/checkout@v4
      - name: Run All Tests
        run: npx playwright test
```

---

## 5. 커버리지 추적

### 5.1 기능 커버리지

| 기능 영역 | 전체 기능 | 테스트된 기능 | 커버리지 |
|----------|----------|--------------|----------|
| 세션 관리 | 10 | 8 | 80% |
| 검출 | 8 | 6 | 75% |
| OCR | 6 | 3 | 50% |
| BOM 관리 | 8 | 4 | 50% |
| 검증 워크플로우 | 6 | 4 | 67% |
| P&ID 분석 | 10 | 5 | 50% |
| TECHCROSS | 8 | 4 | 50% |
| 내보내기 | 4 | 2 | 50% |
| **합계** | **60** | **36** | **60%** |

### 5.2 코드 커버리지 목표

| 영역 | 현재 | 목표 |
|------|------|------|
| Statements | 45% | 80% |
| Branches | 35% | 70% |
| Functions | 50% | 85% |
| Lines | 45% | 80% |

### 5.3 버그 발견율

| 주간 | 발견된 버그 | 테스트로 발견 | 발견율 |
|------|-----------|--------------|--------|
| Week 1 | 15 | 10 | 67% |
| Week 2 | 12 | 9 | 75% |
| Week 3 | 8 | 7 | 88% |
| Week 4 | 5 | 5 | 100% |

---

## 6. 테스트 담당자

| 영역 | 담당 | 백업 |
|------|------|------|
| API 테스트 | 자동화 | - |
| UI 테스트 | 자동화 | QA팀 |
| TECHCROSS | 자동화 | 개발팀 |
| 성능 테스트 | 자동화 | DevOps |
| 보안 테스트 | 보안팀 | DevOps |

---

## 7. 관련 문서

- [README.md](./README.md) - 전체 개요
- [01-api-endpoints.md](./01-api-endpoints.md) - API 테스트
- [02-ui-interactions.md](./02-ui-interactions.md) - UI 테스트
- [03-techcross-workflow.md](./03-techcross-workflow.md) - TECHCROSS 테스트
- [04-hyperparameters.md](./04-hyperparameters.md) - 파라미터 테스트
- [05-edge-cases.md](./05-edge-cases.md) - 엣지 케이스
- [06-integration.md](./06-integration.md) - 통합 테스트
- [07-data-fixtures.md](./07-data-fixtures.md) - 테스트 데이터
