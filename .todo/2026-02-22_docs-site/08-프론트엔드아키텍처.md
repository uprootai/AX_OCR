# Section 9: Frontend Architecture / 프론트엔드 아키텍처

## Pages (5)
1. **App Structure** - React 19 앱 구조
2. **Routing & Pages** - 라우팅 및 페이지 구성
3. **State Management** - Zustand 상태 관리
4. **Component Library** - 공통 컴포넌트 라이브러리
5. **BOM Frontend** - Blueprint AI BOM 프론트엔드

---

## Mermaid Diagrams

### 1. App Route Map TD
```mermaid
flowchart TD
    ROOT["/"] --> HOME[Home]
    ROOT --> BF["/blueprintflow"]
    ROOT --> DASH["/dashboard"]
    ROOT --> PROJ["/projects"]

    BF --> BUILDER["/blueprintflow/builder"]
    BF --> TEMPLATES["/blueprintflow/templates"]

    DASH --> API_MON[API Monitor]
    DASH --> GPU_MON[GPU Monitor]

    PROJ --> PROJ_LIST[Project List]
    PROJ --> PROJ_DETAIL[Project Detail]
    PROJ --> SESSION[Session View]

    style ROOT fill:#e1f5fe
    style BF fill:#fff3e0
    style DASH fill:#e8f5e9
```

### 2. State Management LR
```mermaid
flowchart LR
    subgraph Stores[Zustand Stores]
        WS[workflowStore<br/>워크플로우 상태]
        AS[apiConfigStore<br/>API 설정]
        US[uiStore<br/>UI 상태]
    end

    subgraph Components
        C1[BlueprintFlow]
        C2[Dashboard]
        C3[Settings]
    end

    C1 --> WS
    C1 --> AS
    C2 --> AS
    C3 --> AS & US

    subgraph API[API Layer]
        LIB[api.ts]
    end

    WS --> LIB
    AS --> LIB
```

### 3. Component Hierarchy Mindmap
```mermaid
mindmap
  root((App))
    Layout
      Header
      Sidebar
      Footer
    BlueprintFlow
      Canvas
      NodePanel
      PropertyPanel
      Toolbar
    Dashboard
      APIStatusMonitor
      GPUMonitor
      SystemHealth
    Projects
      ProjectList
      ProjectDetail
      SessionView
    BOM Frontend
      SessionManager
      DetectionViewer
      DimensionEditor
      BOMTable
      QuotationView
```

### 4. BOM Frontend Architecture TD
```mermaid
flowchart TD
    subgraph BOM_FE[BOM Frontend :3000]
        APP[React App]
        SESS[Session Manager]
        DET[Detection Viewer]
        DIM[Dimension Editor]
        VER[Verification UI]
        EXPORT[Export Manager]
    end

    subgraph BOM_BE[BOM Backend :5020]
        API[FastAPI Server]
        STORE[Session Store]
    end

    APP --> SESS
    SESS --> DET & DIM & VER & EXPORT
    SESS --> API
    DET --> API
    DIM --> API
    VER --> API
    API --> STORE
```

---

## React Components

### RouteMap (Interactive)
```typescript
interface RouteMapProps {
  routes: RouteInfo[];
  currentRoute?: string;
  onRouteClick: (path: string) => void;
}

// Clickable route tree
// Highlight current route
// Show page component and description
```

### StateFlow (React Flow)
```typescript
interface StateFlowProps {
  stores: StoreInfo[];
  components: ComponentInfo[];
  subscriptions: Subscription[];
}

// Interactive diagram showing state flow
// Stores → Components subscriptions
// Click store → see state shape
```

### ComponentTree
```typescript
interface ComponentTreeProps {
  root: ComponentNode;
  expandLevel?: number;
}

// Collapsible component hierarchy tree
// Show props interface for each component
// Link to source file
```

---

## Content Outline

### Page 1: App Structure
- React 19 with TypeScript
- Vite build system
- Tailwind CSS styling
- File structure: pages/, components/, store/, config/, lib/

### Page 2: Routing & Pages
- React Router v6
- Route hierarchy
- Page components and layouts
- Lazy loading strategy

### Page 3: State Management
- Zustand stores: workflowStore, apiConfigStore, uiStore
- Store patterns and best practices
- API integration layer (api.ts)
- Optimistic updates

### Page 4: Component Library
- Shared UI components
- Node components for BlueprintFlow
- Dashboard widgets
- Form components and validation

### Page 5: BOM Frontend
- Separate React app (port 3000)
- Session management interface
- Detection viewer with annotation tools
- Dimension editor with inline editing
- Verification UI with keyboard shortcuts

---

## Data Sources
- `web-ui/src/App.tsx`
- `web-ui/src/store/*.ts` (workflowStore, apiConfigStore)
- `web-ui/src/components/`
- `web-ui/src/pages/`
- `blueprint-ai-bom/frontend/`

## Maintenance Triggers
- New route added → update Route Map page
- New store created → update State Management page
- Component library changes → update Component Library page
- BOM frontend changes → update BOM Frontend page
